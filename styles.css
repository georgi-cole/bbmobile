/* ============================================================================
   BIG BROTHER GAME — REFACTORED STYLES
   Compact stylesheet with tokens, consistent spacing, and no duplicate blocks.
   Sections
   01. Design Tokens / Reset
   02. Layout Grid & Cards
   03. Typography & Text Utilities
   04. Buttons
   05. Badges / Tags
   06. Topbar
   07. TV / Show Panel (with safe areas)
   08. Reveal Cards (+ Big Announcement + Avatar rail)
   09. Logs & Tabs
   10. Roster (Dashboard & Top Roster)
   11. Live Vote / Eviction UI
   12. Settings Modal & Forms
   13. Jury House & Finale
   14. America’s Vote — Return Twist
   15. Tooltips / Profile Popover
   16. Minigame / Competition stubs
   17. Confetti
   18. Utilities
   19. Media Queries
   20. Animations
   ============================================================================ */

/* 01. DESIGN TOKENS / RESET ------------------------------------------------ */
:root{
  --bg:#0d151f;
  --card:#132132;
  --card-2:#162435;
  --ink:#e3ecf5;
  --muted:#95a9c0;
  --muted-2:#b6c9dc;

  --line:#24364b;
  --line-2:#1f3248;

  --accent:#83bfff;
  --accent-2:#66b8ff;
  --good:#77d58d;
  --warn:#f2ce7b;
  --bad:#ff6d6d;

  --primary-1:#1f344d;
  --primary-2:#284866;
  --primary-3:#3563a7;

  --radius-s:6px;
  --radius:10px;
  --radius-lg:16px;
  --radius-xl:20px;

  --pad:14px;
  --pad-lg:18px;

  /* TV safe areas */
  --tv-safe-top:44px;
  --tv-safe-bottom:42px;
  --tv-safe-x:16px;

  /* Theme texture overlays (optional, can be overridden by themes) */
  --texture-overlay:none;
  --texture-opacity:0.15;
}

/* THEME DEFINITIONS --------------------------------------------------------- */
/* NEW THEMES: TV Studio (dark) and Modern Big Brother House (light) */

/* TV Studio Theme (default - Dark with neon accents and spotlight effects) */
body[data-theme="tvstudio"],
body:not([data-theme]){
  --bg:#0a0a12;
  --card:#14141f;
  --card-2:#1a1a28;
  --ink:#f0f0ff;
  --muted:#a0a0c8;
  --muted-2:#c0c0e0;
  --line:#2a2a40;
  --line-2:#252535;
  --accent:#00d9ff;
  --accent-2:#33e0ff;
  --good:#00ff88;
  --warn:#ffaa00;
  --bad:#ff3366;
  --primary-1:#1a1a30;
  --primary-2:#252540;
  --primary-3:#3a3a60;
  /* Neon grid with spotlight effects */
  --texture-overlay:url("./spotlight-texture.svg");
  --texture-opacity:0.4;
  /* Theme-specific roster styling */
  --roster-gradient-1:#00d9ff;
  --roster-gradient-2:#0088ff;
  --roster-border:#00d9ff;
  --roster-glow:0 0 20px rgba(0,217,255,0.4);
  --roster-hover-glow:0 0 30px rgba(0,217,255,0.6), 0 0 60px rgba(0,217,255,0.3);
}

/* Modern Big Brother House Theme (Light with glassmorphism and soft accents) */
body[data-theme="modernhouse"]{
  --bg:#f5f5fa;
  --card:#ffffff;
  --card-2:#f8f8fc;
  --ink:#1a1a2e;
  --muted:#6a6a8a;
  --muted-2:#8a8aaa;
  --line:#d0d0e8;
  --line-2:#e0e0f0;
  --accent:#6b8fff;
  --accent-2:#85a5ff;
  --good:#2ecc71;
  --warn:#f39c12;
  --bad:#e74c3c;
  --primary-1:#c0c8ff;
  --primary-2:#a0b0ff;
  --primary-3:#7080ff;
  /* Soft glassmorphism with light rays */
  --texture-overlay:url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3CradialGradient id='lightglass1' cx='30%25' cy='30%25'%3E%3Cstop offset='0%25' stop-color='%236b8fff' stop-opacity='0.15'/%3E%3Cstop offset='50%25' stop-color='%236b8fff' stop-opacity='0.08'/%3E%3Cstop offset='100%25' stop-color='%236b8fff' stop-opacity='0'/%3E%3C/radialGradient%3E%3CradialGradient id='lightglass2' cx='70%25' cy='70%25'%3E%3Cstop offset='0%25' stop-color='%2385a5ff' stop-opacity='0.12'/%3E%3Cstop offset='100%25' stop-color='%2385a5ff' stop-opacity='0'/%3E%3C/radialGradient%3E%3ClinearGradient id='rays' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%23fff' stop-opacity='0.3'/%3E%3Cstop offset='100%25' stop-color='%23fff' stop-opacity='0'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23lightglass1)'/%3E%3Crect width='100' height='100' fill='url(%23lightglass2)'/%3E%3Cpath d='M0,0 L100,100 M20,0 L100,80 M40,0 L100,60' stroke='url(%23rays)' stroke-width='0.5' opacity='0.2'/%3E%3C/svg%3E");
  --texture-opacity:0.3;
  /* Theme-specific roster styling */
  --roster-gradient-1:#6b8fff;
  --roster-gradient-2:#a0b0ff;
  --roster-border:#85a5ff;
  --roster-glow:0 0 15px rgba(107,143,255,0.3);
  --roster-hover-glow:0 0 25px rgba(107,143,255,0.5), 0 0 50px rgba(107,143,255,0.2);
}

/* Midnight Glass Theme (Original - Dark glassmorphism with blue/purple gradients) */
body[data-theme="midnight"]{
  --bg:#0a0e1a;
  --card:#141828;
  --card-2:#1a1f33;
  --ink:#e8f0ff;
  --muted:#9babc8;
  --muted-2:#b8c6e0;
  --line:#2a3552;
  --line-2:#232e4a;
  --accent:#6b8fff;
  --accent-2:#85a5ff;
  --good:#5ed9a2;
  --warn:#ffb84d;
  --bad:#ff6b7a;
  --primary-1:#2c3a5f;
  --primary-2:#3d4e7a;
  --primary-3:#5368a0;
  /* Glass texture with prominent visibility */
  --texture-overlay:url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3CradialGradient id='glass1' cx='30%25' cy='30%25'%3E%3Cstop offset='0%25' stop-color='%23fff' stop-opacity='0.3'/%3E%3Cstop offset='50%25' stop-color='%23fff' stop-opacity='0.1'/%3E%3Cstop offset='100%25' stop-color='%23fff' stop-opacity='0'/%3E%3C/radialGradient%3E%3CradialGradient id='glass2' cx='70%25' cy='70%25'%3E%3Cstop offset='0%25' stop-color='%23fff' stop-opacity='0.25'/%3E%3Cstop offset='100%25' stop-color='%23fff' stop-opacity='0'/%3E%3C/radialGradient%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23glass1)'/%3E%3Crect width='100' height='100' fill='url(%23glass2)'/%3E%3Cpath d='M20,0 L30,100 M50,0 L60,100 M80,0 L90,100' stroke='%23fff' stroke-width='0.5' opacity='0.15'/%3E%3C/svg%3E");
  --texture-opacity:0.35;
  /* Theme-specific roster styling */
  --roster-gradient-1:#6b8fff;
  --roster-gradient-2:#5368a0;
  --roster-border:#85a5ff;
  --roster-glow:0 0 15px rgba(107,143,255,0.3);
  --roster-hover-glow:0 0 25px rgba(107,143,255,0.5), 0 0 50px rgba(107,143,255,0.2);
}

/* Miami Beach Theme (Vibrant tropical with turquoise and coral) */
body[data-theme="miami"]{
  --bg:#0d1418;
  --card:#1a2428;
  --card-2:#20292e;
  --ink:#f0fcff;
  --muted:#a0c8d8;
  --muted-2:#c0e0e8;
  --line:#2a4550;
  --line-2:#254048;
  --accent:#00e5cc;
  --accent-2:#33f0d8;
  --good:#00ffaa;
  --warn:#ffcc44;
  --bad:#ff6688;
  --primary-1:#1a4050;
  --primary-2:#255565;
  --primary-3:#3a7080;
  /* Palm fronds and ocean waves */
  --texture-overlay:url("data:image/svg+xml,%3Csvg width='120' height='120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0,40 Q30,20 60,40 T120,40' stroke='%2300e5cc' stroke-width='1.5' opacity='0.15' fill='none'/%3E%3Cpath d='M0,70 Q30,50 60,70 T120,70' stroke='%2300e5cc' stroke-width='1.5' opacity='0.12' fill='none'/%3E%3Ccircle cx='20' cy='20' r='15' fill='%23ff6688' opacity='0.08'/%3E%3Ccircle cx='100' cy='100' r='15' fill='%2300e5cc' opacity='0.1'/%3E%3C/svg%3E");
  --texture-opacity:0.4;
  /* Theme-specific roster styling */
  --roster-gradient-1:#00e5cc;
  --roster-gradient-2:#3a7080;
  --roster-border:#00e5cc;
  --roster-glow:0 0 18px rgba(0,229,204,0.4);
  --roster-hover-glow:0 0 28px rgba(0,229,204,0.6), 0 0 55px rgba(0,229,204,0.3);
}

/* Wooden Cabin Theme (Warm rustic with wood tones) */
body[data-theme="cabin"]{
  --bg:#1a1410;
  --card:#2a2118;
  --card-2:#352820;
  --ink:#f5ede5;
  --muted:#c8b8a0;
  --muted-2:#e0d0b8;
  --line:#4a3828;
  --line-2:#402f20;
  --accent:#d9984f;
  --accent-2:#e0b070;
  --good:#88cc77;
  --warn:#f0b840;
  --bad:#d8605c;
  --primary-1:#4a3828;
  --primary-2:#5a4538;
  --primary-3:#7a5a40;
  /* Wood grain texture */
  --texture-overlay:url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='wood' width='100' height='20' patternUnits='userSpaceOnUse'%3E%3Cpath d='M0,5 Q25,3 50,5 T100,5' stroke='%23d9984f' stroke-width='0.5' opacity='0.15' fill='none'/%3E%3Cpath d='M0,10 Q25,8 50,10 T100,10' stroke='%23d9984f' stroke-width='0.8' opacity='0.12' fill='none'/%3E%3Cpath d='M0,15 Q25,13 50,15 T100,15' stroke='%23d9984f' stroke-width='0.5' opacity='0.1' fill='none'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23wood)'/%3E%3C/svg%3E");
  --texture-opacity:0.45;
  /* Theme-specific roster styling */
  --roster-gradient-1:#d9984f;
  --roster-gradient-2:#7a5a40;
  --roster-border:#e0b070;
  --roster-glow:0 0 16px rgba(217,152,79,0.35);
  --roster-hover-glow:0 0 26px rgba(217,152,79,0.55), 0 0 50px rgba(217,152,79,0.25);
}

/* Starry Night Theme (Deep space with twinkling stars) */
body[data-theme="starrynight"]{
  --bg:#05080f;
  --card:#0f1420;
  --card-2:#141a28;
  --ink:#e8ecff;
  --muted:#8898c8;
  --muted-2:#a8b8e0;
  --line:#1a2540;
  --line-2:#152035;
  --accent:#ffdd88;
  --accent-2:#ffe8a0;
  --good:#88d5ff;
  --warn:#ffcc66;
  --bad:#ff7799;
  --primary-1:#1a2540;
  --primary-2:#253555;
  --primary-3:#354870;
  /* Starfield with constellations */
  --texture-overlay:url("data:image/svg+xml,%3Csvg width='120' height='120' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='20' cy='20' r='1' fill='%23ffdd88' opacity='0.8'/%3E%3Ccircle cx='50' cy='30' r='1.5' fill='%23ffe8a0' opacity='0.9'/%3E%3Ccircle cx='80' cy='15' r='1' fill='%23ffdd88' opacity='0.7'/%3E%3Ccircle cx='30' cy='60' r='1' fill='%23ffe8a0' opacity='0.8'/%3E%3Ccircle cx='70' cy='70' r='1.5' fill='%23ffdd88' opacity='0.9'/%3E%3Ccircle cx='100' cy='50' r='1' fill='%23ffe8a0' opacity='0.75'/%3E%3Ccircle cx='40' cy='90' r='1' fill='%23ffdd88' opacity='0.7'/%3E%3Ccircle cx='90' cy='100' r='1.5' fill='%23ffe8a0' opacity='0.85'/%3E%3Cpath d='M20,20 L50,30 L80,15' stroke='%23ffdd88' stroke-width='0.3' opacity='0.15'/%3E%3C/svg%3E");
  --texture-opacity:0.5;
  /* Theme-specific roster styling */
  --roster-gradient-1:#ffdd88;
  --roster-gradient-2:#354870;
  --roster-border:#ffe8a0;
  --roster-glow:0 0 18px rgba(255,221,136,0.35);
  --roster-hover-glow:0 0 28px rgba(255,221,136,0.55), 0 0 55px rgba(255,221,136,0.25);
}

/* Over the Rainbow Theme (Vibrant multi-colored gradient) */
body[data-theme="rainbow"]{
  --bg:#1a1a1e;
  --card:#252530;
  --card-2:#2a2a38;
  --ink:#f8f8ff;
  --muted:#b0b0d0;
  --muted-2:#d0d0e8;
  --line:#3a3a50;
  --line-2:#303048;
  --accent:#ff88cc;
  --accent-2:#ffa0d8;
  --good:#88ff88;
  --warn:#ffcc66;
  --bad:#ff6688;
  --primary-1:#3a3a50;
  --primary-2:#4a4a60;
  --primary-3:#6a6a80;
  /* Rainbow gradient arcs */
  --texture-overlay:url("data:image/svg+xml,%3Csvg width='120' height='120' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient id='rainbow1' x1='0%25' y1='0%25' x2='100%25' y2='0%25'%3E%3Cstop offset='0%25' stop-color='%23ff6666' stop-opacity='0.15'/%3E%3Cstop offset='20%25' stop-color='%23ffaa66' stop-opacity='0.15'/%3E%3Cstop offset='40%25' stop-color='%23ffff66' stop-opacity='0.15'/%3E%3Cstop offset='60%25' stop-color='%2366ff66' stop-opacity='0.15'/%3E%3Cstop offset='80%25' stop-color='%236666ff' stop-opacity='0.15'/%3E%3Cstop offset='100%25' stop-color='%23ff66ff' stop-opacity='0.15'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M0,60 Q60,30 120,60' stroke='url(%23rainbow1)' stroke-width='3' fill='none'/%3E%3Cpath d='M0,70 Q60,40 120,70' stroke='url(%23rainbow1)' stroke-width='2' fill='none' opacity='0.8'/%3E%3C/svg%3E");
  --texture-opacity:0.4;
  /* Theme-specific roster styling */
  --roster-gradient-1:#ff88cc;
  --roster-gradient-2:#6a6a80;
  --roster-border:#ffa0d8;
  --roster-glow:0 0 18px rgba(255,136,204,0.35);
  --roster-hover-glow:0 0 28px rgba(255,136,204,0.55), 0 0 55px rgba(255,136,204,0.25);
}

/* The Matrix Theme (Digital green code rain) */
body[data-theme="matrix"]{
  --bg:#000000;
  --card:#0a0f0a;
  --card-2:#0f140f;
  --ink:#00ff41;
  --muted:#00aa30;
  --muted-2:#00cc3a;
  --line:#1a3020;
  --line-2:#152818;
  --accent:#00ff41;
  --accent-2:#33ff66;
  --good:#00ff88;
  --warn:#88ff00;
  --bad:#ff4444;
  --primary-1:#0a1f0f;
  --primary-2:#0f2a14;
  --primary-3:#143a1a;
  /* Digital code rain pattern */
  --texture-overlay:url("data:image/svg+xml,%3Csvg width='100' height='120' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='20' font-family='monospace' font-size='8' fill='%2300ff41' opacity='0.15'%3E01%3C/text%3E%3Ctext x='30' y='40' font-family='monospace' font-size='8' fill='%2300ff41' opacity='0.12'%3E10%3C/text%3E%3Ctext x='50' y='30' font-family='monospace' font-size='8' fill='%2300ff41' opacity='0.18'%3E11%3C/text%3E%3Ctext x='70' y='60' font-family='monospace' font-size='8' fill='%2300ff41' opacity='0.14'%3E00%3C/text%3E%3Ctext x='15' y='80' font-family='monospace' font-size='8' fill='%2300ff41' opacity='0.16'%3E01%3C/text%3E%3Ctext x='55' y='100' font-family='monospace' font-size='8' fill='%2300ff41' opacity='0.13'%3E10%3C/text%3E%3Ctext x='85' y='90' font-family='monospace' font-size='8' fill='%2300ff41' opacity='0.15'%3E11%3C/text%3E%3C/svg%3E");
  --texture-opacity:0.5;
  /* Theme-specific roster styling */
  --roster-gradient-1:#00ff41;
  --roster-gradient-2:#143a1a;
  --roster-border:#00ff41;
  --roster-glow:0 0 20px rgba(0,255,65,0.4);
  --roster-hover-glow:0 0 30px rgba(0,255,65,0.6), 0 0 60px rgba(0,255,65,0.3);
}

/* Modern Apartment Theme (Clean minimalist with warm neutrals) */
body[data-theme="apartment"]{
  --bg:#fafafa;
  --card:#ffffff;
  --card-2:#f5f5f5;
  --ink:#2a2a2a;
  --muted:#707070;
  --muted-2:#909090;
  --line:#e0e0e0;
  --line-2:#ebebeb;
  --accent:#5a9fd4;
  --accent-2:#7ab5e0;
  --good:#4caf50;
  --warn:#ff9800;
  --bad:#f44336;
  --primary-1:#d0d8e0;
  --primary-2:#b0bcc8;
  --primary-3:#8098b0;
  /* Subtle geometric pattern */
  --texture-overlay:url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3Cpattern id='geo' width='50' height='50' patternUnits='userSpaceOnUse'%3E%3Crect x='0' y='0' width='25' height='25' fill='%235a9fd4' opacity='0.03'/%3E%3Crect x='25' y='25' width='25' height='25' fill='%235a9fd4' opacity='0.03'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='100' height='100' fill='url(%23geo)'/%3E%3Cpath d='M0,50 L100,50 M50,0 L50,100' stroke='%235a9fd4' stroke-width='0.5' opacity='0.08'/%3E%3C/svg%3E");
  --texture-opacity:0.35;
  /* Theme-specific roster styling */
  --roster-gradient-1:#5a9fd4;
  --roster-gradient-2:#8098b0;
  --roster-border:#7ab5e0;
  --roster-glow:0 0 15px rgba(90,159,212,0.3);
  --roster-hover-glow:0 0 25px rgba(90,159,212,0.5), 0 0 50px rgba(90,159,212,0.2);
}

*{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
:focus-visible{ outline:2px solid var(--accent-2); outline-offset:2px; }
html,body{ margin:0; padding:0; height:100%; background:var(--bg); color:var(--ink);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,"Helvetica Neue",Arial,sans-serif;
  line-height:1.4; -webkit-font-smoothing:antialiased; }
img{ max-width:100%; display:block; }
a{ color:#7fbaff; text-decoration:none; transition:color .18s; }
a:hover{ color:#a8d3ff; } a:active{ color:#d3ecff; }

::-webkit-scrollbar{ width:10px; height:10px; }
::-webkit-scrollbar-track{ background:#0f1f31; }
::-webkit-scrollbar-thumb{ background:#26435d; border-radius:6px; }
::-webkit-scrollbar-thumb:hover{ background:#31587a; }

/* 02. LAYOUT GRID & CARDS -------------------------------------------------- */
.wrap{
  display:grid; gap:14px; padding:14px;
  grid-template-columns:300px minmax(520px,1fr);
  grid-auto-rows:min-content;
  align-items:start;
}
/* Explicit card positioning for 2-column layout */
#dashboardCard{ grid-column:1; grid-row:1; }
#sideCard{ grid-column:1; grid-row:2; }
#actionCard{ grid-column:2; grid-row:1 / span 2; }

.card{
  /* Modern gradient background with glassmorphism */
  background:linear-gradient(145deg, var(--card) 0%, var(--card-2) 100%);
  border:1px solid var(--line);
  padding:14px 16px 18px;
  border-radius:20px; /* More rounded for modern look */
  position:relative;
  /* Enhanced shadows for depth */
  box-shadow:0 12px 32px -16px rgba(0,0,0,.75), 
             0 4px 16px -8px rgba(0,0,0,.5),
             inset 0 1px 0 rgba(255,255,255,.08);
  overflow:hidden;
  /* Subtle glassmorphism effect */
  backdrop-filter:blur(12px) saturate(1.2);
  -webkit-backdrop-filter:blur(12px) saturate(1.2);
}
/* Apply theme texture overlay to cards with enhanced visibility */
.card::before{
  content:''; position:absolute; inset:0; pointer-events:none;
  background-image:var(--texture-overlay);
  background-size:100px 100px;
  opacity:var(--texture-opacity);
  z-index:0;
  /* Additional subtle gradient overlay for depth */
  background-image:var(--texture-overlay), 
                   radial-gradient(circle at 20% 20%, rgba(255,255,255,.08) 0%, transparent 50%);
}
.card > *{ position:relative; z-index:1; }
.sep{ height:12px; }
hr.divider{ border:none; border-top:1px solid var(--line-2); margin:14px 0; }

/* 03. TYPOGRAPHY & TEXT UTILITIES ------------------------------------------ */
/* Enhanced typography with better spacing and modern feel */
h1{
  margin:0 0 .75em;
  font-size:1.65rem;
  font-weight:700;
  letter-spacing:.8px;
  line-height:1.2;
  background:linear-gradient(135deg, var(--ink) 0%, var(--accent) 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color: var(--ink); /* Fallback color for accessibility */
  -webkit-text-fill-color: var(--ink); /* Ensures text is visible with gradient */
}
h2{
  margin:0 0 .65em;
  font-size:1.25rem;
  font-weight:700;
  letter-spacing:.7px;
  line-height:1.3;
}
h3{
  margin:0 0 .6em;
  font-size:1.05rem;
  font-weight:700;
  letter-spacing:.6px;
  line-height:1.35;
}
.big{
  font-size:1.3rem;
  font-weight:700;
  letter-spacing:.5px;
}
.small{ font-size:.78rem; line-height:1.4; }
.tiny{ font-size:.72rem; line-height:1.35; }
.micro{ font-size:.64rem; line-height:1.2; letter-spacing:.5px; }
.muted{ color:var(--muted); }
.muted-light{ color:var(--muted-2); }
.warn{ color:var(--warn); }
.ok{ color:var(--good); }
.danger{ color:var(--bad); }
.accent{ color:var(--accent); }

/* 04. BUTTONS --------------------------------------------------------------- */
button{ font:inherit; cursor:pointer; }
.btn{
  /* Modern gradient pill button with shadow */
  background:linear-gradient(135deg, var(--primary-2) 0%, var(--primary-1) 100%);
  color:#e8f0ff;
  padding:8px 18px 9px;
  border:none;
  border-radius:999px; /* Full pill shape */
  font-size:.72rem;
  letter-spacing:.7px;
  font-weight:700;
  text-transform:uppercase;
  display:inline-flex;
  gap:6px;
  align-items:center;
  line-height:1.1;
  /* Enhanced transitions for smooth effects */
  transition:all .25s cubic-bezier(.25,.9,.25,1);
  /* Modern shadow with glow */
  box-shadow:0 4px 12px -4px rgba(0,0,0,.4),
             0 2px 6px -2px rgba(0,0,0,.3),
             inset 0 1px 0 rgba(255,255,255,.15);
  position:relative;
  overflow:hidden;
}
/* Subtle shine effect on buttons */
.btn::before{
  content:'';
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.15), transparent);
  transition:left .5s;
}
.btn:hover::before{
  left:100%;
}
.btn:hover{
  background:linear-gradient(135deg, var(--primary-3) 0%, var(--primary-2) 100%);
  box-shadow:0 6px 18px -4px rgba(0,0,0,.5),
             0 4px 12px -2px rgba(0,0,0,.4),
             0 0 0 2px var(--accent-2),
             inset 0 1px 0 rgba(255,255,255,.2);
  transform:translateY(-1px);
}
.btn:active{
  transform:translateY(1px);
  box-shadow:0 2px 6px -2px rgba(0,0,0,.4),
             inset 0 1px 0 rgba(255,255,255,.1);
}
.btn:disabled,.btn.disabled{
  opacity:.55;
  cursor:not-allowed;
  filter:grayscale(.5) brightness(.8);
  box-shadow:0 2px 6px -2px rgba(0,0,0,.3);
}
/* Primary button with accent glow */
.btn.primary{
  background:linear-gradient(135deg, var(--accent) 0%, var(--primary-3) 100%);
  box-shadow:0 4px 12px -4px rgba(0,0,0,.4),
             0 2px 8px -2px var(--accent),
             inset 0 1px 0 rgba(255,255,255,.2);
}
.btn.primary:hover{
  background:linear-gradient(135deg, var(--accent-2) 0%, var(--accent) 100%);
  box-shadow:0 6px 18px -4px var(--accent),
             0 4px 12px -2px var(--accent-2),
             0 0 24px -8px var(--accent),
             inset 0 1px 0 rgba(255,255,255,.25);
}
/* Danger button with red glow */
.btn.danger{
  background:linear-gradient(135deg, #d84a4a 0%, #993636 100%);
  box-shadow:0 4px 12px -4px rgba(0,0,0,.4),
             0 2px 8px -2px #d84a4a,
             inset 0 1px 0 rgba(255,255,255,.15);
}
.btn.danger:hover{
  background:linear-gradient(135deg, #ff6565 0%, #d84a4a 100%);
  box-shadow:0 6px 18px -4px #d84a4a,
             0 4px 12px -2px #ff6565,
             0 0 24px -8px #d84a4a,
             inset 0 1px 0 rgba(255,255,255,.2);
}
/* Success button with green glow */
.btn.ok{
  background:linear-gradient(135deg, #3f9960 0%, #2d7a47 100%);
  box-shadow:0 4px 12px -4px rgba(0,0,0,.4),
             0 2px 8px -2px #3f9960,
             inset 0 1px 0 rgba(255,255,255,.15);
}
.btn.ok:hover{
  background:linear-gradient(135deg, #4fb574 0%, #3f9960 100%);
  box-shadow:0 6px 18px -4px #3f9960,
             0 4px 12px -2px #4fb574,
             0 0 24px -8px #3f9960,
             inset 0 1px 0 rgba(255,255,255,.2);
}
.btn.outline{
  background:linear-gradient(145deg, var(--card) 0%, var(--card-2) 100%);
  border:2px solid var(--line);
  padding:6px 16px 7px;
  box-shadow:0 2px 8px -4px rgba(0,0,0,.3),
             inset 0 1px 0 rgba(255,255,255,.08);
}
.btn.outline:hover{
  background:linear-gradient(145deg, var(--card-2) 0%, var(--card) 100%);
  border-color:var(--accent);
  box-shadow:0 4px 12px -4px rgba(0,0,0,.4),
             0 0 0 1px var(--accent),
             inset 0 1px 0 rgba(255,255,255,.12);
}
.btn.small{
  padding:6px 14px 7px;
  font-size:.62rem;
}
.btn.ghost{
  background:transparent;
  color:var(--accent);
  box-shadow:none;
}
.btn.ghost:hover{
  background:rgba(255,255,255,.08);
  box-shadow:0 4px 12px -6px rgba(0,0,0,.3),
             inset 0 0 0 1px rgba(255,255,255,.1);
}
.btn.iconOnly{
  padding:8px 12px 9px;
}
button:focus-visible,.btn:focus-visible{
  outline:2px solid var(--accent-2);
  outline-offset:3px;
  /* Add glow on focus */
  box-shadow:0 6px 18px -4px rgba(0,0,0,.5),
             0 4px 12px -2px rgba(0,0,0,.4),
             0 0 0 3px var(--accent-2),
             0 0 24px -4px var(--accent),
             inset 0 1px 0 rgba(255,255,255,.2);
}

/* 05. BADGES / TAGS --------------------------------------------------------- */
.badge,.pill{
  display:inline-block; background:#203347; padding:4px 9px 5px; border-radius:999px;
  font-size:.62rem; font-weight:700; letter-spacing:.6px; text-transform:uppercase; line-height:1;
}
.badge.warn{ background:#3a2c07; color:#f7d585; }
.badge.bad{ background:#442025; color:#ffb2b2; }
.badge.ok{ background:#2b4e30; color:#88e6a0; }
.badge.acc{ background:#26415c; color:#96cfff; }
.badge.outline{ background:var(--card); border:1px solid #2d4764; }

.tag{
  background:#2a3d52; display:inline-flex; align-items:center; justify-content:center;
  padding:3px 7px 4px; border-radius:4px; font-size:.55rem; font-weight:600; letter-spacing:.4px;
  text-transform:uppercase; color:#c7d8e8; margin:1px 3px 1px 0; line-height:1;
}
.tag.hoh{ background:#2f4a6a; color:#ffd775; }
.tag.veto{ background:#205a36; color:#7eed9d; }
.tag.nom{ background:#6a2e2e; color:#ff9e9e; }
.tag.jury{ background:#3e3b63; color:#d2c8ff; }
.tag.evicted{ background:#2e2e2e; color:#bbb; }
.tag.winner{ background:#275339; color:#9fe5b0; }
.tag.runner{ background:#374261; color:#c9d7f7; }

/* 06. TOPBAR ---------------------------------------------------------------- */
.topbar{
  background:#121d2a; border-bottom:1px solid #1f2e40; padding:6px 12px;
  display:flex; gap:8px; justify-content:flex-start; align-items:center;
  position:sticky; top:0; z-index:40; box-shadow:0 8px 24px -16px rgba(0,0,0,.6);
}

/* Roster Bar (above TV) */
#rosterBar{
  background:linear-gradient(180deg, rgba(18,29,42,.88), rgba(13,22,35,.92));
  border:1px solid #1f3248; border-radius:12px 12px 0 0;
  padding:10px 12px 8px; margin-bottom:-2px; position:relative; z-index:2;
  box-shadow:0 2px 12px -6px rgba(0,0,0,.6) inset;
}
#rosterBar .top-roster-row{
  display:flex; gap:8px; align-items:flex-start; justify-content:flex-start;
  flex-wrap:wrap; padding:0;
}
@media (max-width: 640px){
  #rosterBar{
    padding:8px 6px 10px;
    margin-bottom:6px;
  }
  #rosterBar .top-roster-row{
    flex-wrap:nowrap; 
    overflow-x:auto; 
    overflow-y:hidden;
    -webkit-overflow-scrolling:touch; 
    scrollbar-width:thin;
    gap:10px;
    padding-bottom:4px;
  }
  #rosterBar .top-roster-row::-webkit-scrollbar{ 
    height:5px;
    display:block;
  }
  /* Ensure tiles have proper minimum width on mobile */
  .top-roster-tile{
    min-width:75px;
    padding:10px 5px 20px;
  }
  /* Adjust badge sizes for mobile */
  .status-badge{
    width:26px;
    height:26px;
    font-size:1rem;
  }
  .status-badge.medal-winner,
  .status-badge.medal-runner-up{
    width:30px;
    height:30px;
    font-size:1.2rem;
  }
  /* Adjust evicted cross for mobile */
  .evicted-cross{
    font-size:3.5rem;
  }
}

/* 07. TV / SHOW PANEL (safe areas) ----------------------------------------- */
.tvFrame{ position:relative; }
.tv{
  position:relative; height:260px;
  /* Default background with tvscreen.jpg and overlay for blending */
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    url('assets/videos/tvscreen.jpg') center/cover;
  background-color:#0e1730; /* Fallback */
  border:2px solid #213349; border-radius:18px; overflow:hidden;
  display:flex; flex-direction:column; justify-content:flex-start; padding:0; font-size:.72rem;
  box-shadow:0 16px 36px -22px rgba(0,0,0,.75);
}
/* Custom TV background support (when user sets custom image) */
.tv.hasTvBg{
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    var(--tv-bg) center/cover;
  background-color:#0e1730;
}
.tvHead{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;
  padding:10px 14px 8px; border-bottom:1px solid rgba(120,210,255,.07);
  background:linear-gradient(180deg, rgba(13,24,38,.45), rgba(7,14,24,.2));
}
.tvTitle{ font-weight:600; letter-spacing:.6px; font-size:.75rem; color:#c7d7eb; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.tvTimer{ font-size:.95rem; font-weight:600; color:#e2edf8; white-space:nowrap; }

.tvViewport{
  position:relative; flex:1 1 auto; overflow:hidden;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
}

/* LIVE Badge (inside TV viewport, bottom-right) */
.liveBadge{
  position:absolute; bottom:12px; right:12px; z-index:15;
  padding:6px 16px 7px; border-radius:8px; font-size:.72rem; font-weight:700;
  letter-spacing:1.2px; text-transform:uppercase; color:#fff;
  background:linear-gradient(135deg, #ff3838 0%, #ff6b6b 50%, #ff3838 100%);
  box-shadow:0 0 0 2px rgba(255,56,56,.3), 0 4px 12px -4px rgba(255,56,56,.8), 
             inset 0 1px 2px rgba(255,255,255,.35), inset 0 -1px 2px rgba(0,0,0,.25);
  animation:livePulse 2.4s ease-in-out infinite;
  text-shadow:0 1px 2px rgba(0,0,0,.4);
  pointer-events:none;
}
@keyframes livePulse{
  0%, 100%{ box-shadow:0 0 0 2px rgba(255,56,56,.3), 0 4px 12px -4px rgba(255,56,56,.8), 
                       inset 0 1px 2px rgba(255,255,255,.35), inset 0 -1px 2px rgba(0,0,0,.25); }
  50%{ box-shadow:0 0 0 2px rgba(255,56,56,.5), 0 4px 18px -2px rgba(255,56,56,1), 
                   0 0 24px -6px rgba(255,56,56,.9),
                   inset 0 1px 2px rgba(255,255,255,.45), inset 0 -1px 2px rgba(0,0,0,.25); }
}

#tvOverlay{
  position:absolute; z-index:12;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  pointer-events:auto; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:8px;
}
#confetti{
  position:absolute; z-index:11;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  pointer-events:none; mix-blend-mode:screen; opacity:.95;
}
.tvNow{
  position:absolute; z-index:13;
  left:var(--tv-safe-x); right:var(--tv-safe-x); bottom:8px;
  min-height:28px; padding:6px 10px; border-radius:8px; font-size:.82rem;
  background:linear-gradient(180deg, rgba(9,24,40,.85), rgba(6,14,24,.85)),
             linear-gradient(90deg, rgba(111,211,255,.18), rgba(103,255,168,.12));
  border:1px solid rgba(120,210,255,.22); box-shadow:0 4px 18px -12px rgba(0,0,0,.8);
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}

/* Timer progress (outside TV) */
/* OLD CIRCULAR BAR (preserved for reversibility via timerStyle config flag)
 * To restore circular progress: 
 * 1. Set g.cfg.timerStyle = 'circular' in config
 * 2. Uncomment these styles
 * 3. Hide .hourglass-container in dashboard-timer-section when timerStyle === 'circular'
 * 
.progressbar{ height:10px; background:#112030; border:1px solid #203347; border-radius:8px; overflow:hidden; margin:8px 0 2px; position:relative; }
.progressbar-fill{ height:100%; width:0%; background:linear-gradient(90deg,#4695ff,#71bfff); box-shadow:0 0 8px -2px #4695ff; transition:width .22s linear; }
*/

/* REDESIGNED DASHBOARD */
.dashboard-title-header{
  display:flex;
  gap:8px;
  align-items:center;
  margin-bottom:16px;
  min-height:32px;
}
.dashboard-week-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:6px 12px;
  border-radius:12px;
  background:linear-gradient(135deg, var(--accent) 0%, var(--accent-2) 100%);
  color:var(--card);
  font-size:0.75rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.5px;
  white-space:nowrap;
  flex-shrink:0;
}
.dashboard-phase-name{
  font-size:1rem;
  font-weight:600;
  color:var(--ink);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  letter-spacing:0.4px;
  flex:1;
  min-width:0;
}
.dashboard-row{
  display:flex;
  gap:12px;
  margin-bottom:12px;
  flex-wrap:wrap;
}
.dashboard-info-item{
  flex:1;
  min-width:120px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.dashboard-info-full{
  flex:1 1 100%;
}
.dashboard-label{
  font-size:0.75rem;
  text-transform:uppercase;
  letter-spacing:0.5px;
  color:var(--muted);
  font-weight:600;
}
.dashboard-badge{
  padding:8px 14px;
  border-radius:8px;
  font-weight:600;
  font-size:0.95rem;
  text-align:center;
  transition:all 0.2s ease;
}
.dashboard-badge-hoh{
  background:linear-gradient(135deg, var(--warn) 0%, var(--primary-2) 100%);
  color:var(--ink);
  box-shadow:0 2px 8px rgba(0,0,0,0.2);
  border:1px solid var(--line);
}
.dashboard-badge-pov{
  background:linear-gradient(135deg, var(--good) 0%, var(--primary-2) 100%);
  color:var(--ink);
  box-shadow:0 2px 8px rgba(0,0,0,0.2);
  border:1px solid var(--line);
}
.dashboard-badge-alive{
  background:linear-gradient(135deg, var(--good) 0%, var(--primary-2) 100%);
  color:var(--ink);
  box-shadow:0 2px 8px rgba(0,0,0,0.2);
  border:1px solid var(--line);
}
.dashboard-badge-evicted{
  background:linear-gradient(135deg, var(--bad) 0%, var(--primary-2) 100%);
  color:var(--ink);
  box-shadow:0 2px 8px rgba(0,0,0,0.2);
  border:1px solid var(--line);
}
.dashboard-nominees{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.nominee-badge{
  padding:6px 12px;
  border-radius:6px;
  background:linear-gradient(135deg, var(--warn) 0%, var(--primary-2) 100%);
  color:var(--ink);
  font-weight:600;
  font-size:0.9rem;
  box-shadow:0 2px 6px rgba(0,0,0,0.2);
  border:1px solid var(--line);
}
.dashboard-special-badges{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:8px;
}
.dashboard-timer-section{
  margin-top:12px;
  /* Glass effect styling */
  background:linear-gradient(135deg, var(--card) 0%, var(--card-2) 100%);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:14px;
  backdrop-filter:blur(8px) brightness(1.05);
  -webkit-backdrop-filter:blur(8px) brightness(1.05);
  box-shadow:0 4px 12px -4px rgba(0,0,0,0.3);
}
.dashboard-timer-compact-header{
  display:flex;
  gap:8px;
  align-items:center;
  margin-bottom:12px;
  min-height:24px;
}
.timer-week-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:4px 10px;
  border-radius:12px;
  background:linear-gradient(135deg, var(--accent) 0%, var(--accent-2) 100%);
  color:var(--card);
  font-size:0.7rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.5px;
  white-space:nowrap;
  flex-shrink:0;
}
.timer-phase-name{
  font-size:0.85rem;
  font-weight:600;
  color:var(--ink);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  letter-spacing:0.3px;
  flex:1;
  min-width:0;
}
.timer-next-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:4px 10px;
  border-radius:12px;
  background:linear-gradient(135deg, var(--accent-2) 0%, var(--accent) 100%);
  color:var(--card);
  font-size:0.7rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.5px;
  white-space:nowrap;
  flex-shrink:0;
  opacity:0.85;
}
.dashboard-timer-content{
  display:flex;
  gap:8px;
  align-items:baseline;
  margin-bottom:12px;
}
.dashboard-timer-label{
  font-size:0.7rem;
  text-transform:uppercase;
  letter-spacing:0.8px;
  color:var(--muted);
  font-weight:700;
  line-height:1;
}
.dashboard-timer-display{
  font-size:1rem;
  font-weight:700;
  letter-spacing:1px;
  color:var(--ink);
  line-height:1;
}

/* Skip Progress Bar */
.timer-skip-progress-bar{
  position:relative;
  width:100%;
  height:32px;
  border-radius:12px;
  background:linear-gradient(135deg, var(--card) 0%, var(--card-2) 100%);
  border:1px solid var(--line);
  overflow:hidden;
  cursor:pointer;
  backdrop-filter:blur(8px) brightness(1.05);
  -webkit-backdrop-filter:blur(8px) brightness(1.05);
  box-shadow:0 2px 8px -2px rgba(0,0,0,0.3);
  transition:transform 0.2s ease, box-shadow 0.2s ease;
}
.timer-skip-progress-bar:hover{
  transform:translateY(-1px);
  box-shadow:0 4px 12px -2px rgba(0,0,0,0.4);
}
.timer-skip-progress-bar:focus{
  outline:2px solid var(--accent);
  outline-offset:2px;
}
.timer-skip-progress-bar:active{
  transform:translateY(0);
}
.timer-skip-progress-fill{
  position:absolute;
  top:0;
  right:0;
  bottom:0;
  background:linear-gradient(90deg, var(--accent) 0%, var(--accent-2) 100%);
  width:100%;
  transition:width 0.3s linear;
  box-shadow:inset 0 1px 3px rgba(255,255,255,0.2);
  opacity:0.6;
}
.timer-skip-label{
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100%;
  font-size:0.75rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:1px;
  color:var(--ink);
  z-index:1;
  text-shadow:0 1px 2px rgba(0,0,0,0.3);
}

/* OLD STYLES - Removed hourglass and old two-column layout */
/* Keep these commented for reference if rollback needed
.timer-left-column{ display:flex; flex-direction:column; gap:2px; justify-content:space-between; min-height:60px; }
.timer-right-column{ display:flex; align-items:center; justify-content:center; }
.timer-skip-container{ display:flex; justify-content:flex-start; margin-top:2px; }
.timer-skip-container .btn{ width:100%; max-width:100%; }
.hourglass-container{ height:60px; display:flex; align-items:center; justify-content:center; position:relative; }
.hourglass-svg{ width:45px; height:60px; filter:drop-shadow(0 2px 6px var(--accent)); }
.hourglass-frame{ transition:opacity 0.3s ease; }
.hourglass-sand-top, .hourglass-sand-bottom{ transition:height 0.3s linear; }
.hourglass-sand-flow{ animation:sandFlow 1.5s ease-in-out infinite; }
@keyframes sandFlow{ 0%, 100%{ opacity:0; cy:50; r:2; } 20%{ opacity:0.8; cy:48; r:2.5; } 50%{ opacity:1; cy:50; r:3; } 80%{ opacity:0.8; cy:52; r:2.5; } }
*/

/* Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce){
  .timer-skip-progress-bar{
    transition:none;
  }
  .timer-skip-progress-fill{
    transition:none;
  }
  .dashboard-timer-display{
    text-shadow:none;
  }
}

/* Mobile responsiveness */
@media (max-width: 600px){
  .dashboard-timer-compact-header{
    flex-wrap:wrap;
    gap:6px;
  }
  .dashboard-timer-content{
    gap:6px;
  }
  .dashboard-timer-label{
    font-size:0.65rem;
  }
  .dashboard-timer-display{
    font-size:0.95rem;
  }
  .timer-skip-progress-bar{
    height:36px;
  }
  .timer-skip-label{
    font-size:0.7rem;
  }
}

.timeReading{ font-size:1.8rem; font-weight:600; letter-spacing:1px; color:#dde9f6; }

/* 08. REVEAL CARDS + BIG ANNOUNCEMENT -------------------------------------- */
.revealCard{
  /* Enhanced glassmorphism with gradient */
  background:linear-gradient(145deg, rgba(28,43,62,.94), rgba(12,22,36,.90));
  backdrop-filter:blur(16px) saturate(1.4);
  -webkit-backdrop-filter:blur(16px) saturate(1.4);
  border:1px solid rgba(110,160,220,.25);
  position:relative;
  overflow:hidden;
  text-align:center;
  font-size:.82rem;
  line-height:1.5;
  padding:22px 26px 24px;
  border-radius:24px; /* More rounded */
  /* Enhanced shadow with glow */
  box-shadow:0 12px 36px -16px rgba(0,0,0,.8),
             0 6px 20px -8px rgba(0,0,0,.6),
             0 0 0 1px rgba(120,180,255,.15),
             0 0 32px -10px var(--accent) inset;
  animation:cardFloatIn .65s cubic-bezier(.25,.9,.25,1) forwards;
  max-width:min(780px, 92vw);
}
.revealCard h3{
  font-size:1.15rem;
  letter-spacing:1px;
  margin:0 0 .6em;
  font-weight:700;
  /* Enhanced gradient text with glow */
  background:linear-gradient(135deg, #f0f8ff 0%, var(--accent-2) 50%, #f0f8ff 100%);
  -webkit-background-clip:text;
  background-clip:text;
  color:#f0f8ff; /* Fallback color for gradient text */
  color:transparent;
  text-shadow:0 0 28px var(--accent);
  filter:drop-shadow(0 2px 8px rgba(140,200,255,.4));
}
.revealCard:not(.no-breathe){
  animation:cardFloatIn .65s cubic-bezier(.25,.9,.25,1), cardBreathe 6s ease-in-out .7s infinite;
}
/* Enhanced shine overlay */
.revealCard::after{
  content:'';
  position:absolute;
  inset:0;
  pointer-events:none;
  opacity:.6;
  mix-blend-mode:overlay;
  background:radial-gradient(circle at 20% 15%, rgba(255,255,255,.25) 0%, transparent 50%),
             radial-gradient(circle at 80% 85%, var(--accent) 0%, transparent 50%),
             linear-gradient(135deg, rgba(255,255,255,.1), rgba(255,255,255,0) 40%);
}
.revealCard.return{
  border-color:var(--accent);
  /* Enhanced glow for return twist */
  box-shadow:0 12px 36px -16px rgba(0,0,0,.8),
             0 6px 20px -8px rgba(0,0,0,.6),
             0 0 0 2px var(--accent),
             0 0 42px -12px var(--accent) inset,
             0 0 32px -8px var(--accent);
  animation:cardFloatIn .65s cubic-bezier(.25,.9,.25,1), returnGlow 2s ease-in-out infinite;
}
/* Return glow animation */
@keyframes returnGlow{
  0%, 100%{ 
    box-shadow:0 12px 36px -16px rgba(0,0,0,.8),
               0 6px 20px -8px rgba(0,0,0,.6),
               0 0 0 2px var(--accent),
               0 0 42px -12px var(--accent) inset,
               0 0 32px -8px var(--accent);
  }
  50%{ 
    box-shadow:0 12px 36px -16px rgba(0,0,0,.8),
               0 6px 20px -8px rgba(0,0,0,.6),
               0 0 0 2px var(--accent-2),
               0 0 52px -10px var(--accent-2) inset,
               0 0 48px -4px var(--accent-2);
  }
}

/* Big announcement variation */
.revealCard.bigAnnounce{
  max-width: clamp(340px, 64vw, 820px);
  background:linear-gradient(145deg, rgba(26,49,71,.96) 0%, rgba(14,26,41,.92) 100%);
  border:1px solid var(--accent);
  /* Enhanced announcement shadow with glow */
  box-shadow:0 20px 56px -24px rgba(0,0,0,.9),
             0 8px 28px -12px rgba(0,0,0,.7),
             0 0 0 2px var(--accent),
             0 0 64px -16px var(--accent) inset;
  font-size:.88rem;
  padding:30px 36px 34px;
  border-radius:32px; /* Extra rounded for big announcements */
  text-align:center;
}
.revealCard.bigAnnounce h3{
  font-size:1.4rem;
  margin:0 0 .7em;
  letter-spacing:1.2px;
  font-weight:800;
  /* Enhanced gradient with animation */
  background:linear-gradient(135deg, #ffffff 0%, var(--accent-2) 30%, #ffffff 60%, var(--accent) 100%);
  background-size:200% 100%;
  animation:gradientShift 4s ease-in-out infinite;
  -webkit-background-clip:text; color:transparent; text-shadow:0 0 28px rgba(140,220,255,.45);
}

/* Avatar rail support */
.revealCard.has-avatars{ display:flex; align-items:stretch; text-align:left; gap:18px; }
.rc-avatar-rail{ flex:0 0 86px; display:flex; flex-direction:column; gap:10px; padding-top:2px; }
.rc-avatar-rail .rc-av{
  width:80px; height:80px; border-radius:20px; object-fit:cover; background:#101c28; border:2px solid #356089;
  box-shadow:0 6px 18px -10px rgba(0,0,0,.65); animation:cardAvatarIn .6s ease;
}
.revealCard.has-avatars .rc-body{ flex:1 1 auto; min-width:0; }

/* Diary Room Card - Live Eviction Modal */
.revealCard.diaryRoomCard{
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  backdrop-filter:blur(12px) saturate(1.3); -webkit-backdrop-filter:blur(12px) saturate(1.3);
}

/* 09. LOGS & TABS ----------------------------------------------------------- */
#logTabs{ display:flex; gap:6px; flex-wrap:wrap; margin-bottom:6px; }
#logTabs .tab-btn{
  background:#1c2e43; border:none; padding:5px 11px 6px; font-size:.62rem; border-radius:8px;
  text-transform:uppercase; letter-spacing:.5px; cursor:pointer; color:#c8d5e6; font-weight:600; transition:background .22s;
}
#logTabs .tab-btn.active,#logTabs .tab-btn:hover{ background:#284061; }
.log{
  height:220px; overflow:auto; background:#0f1f2d; border:1px solid #1d3042; border-radius:10px;
  padding:7px 10px 8px; font-size:.67rem; line-height:1.35; position:relative;
}
.log-pane{ display:none; } .log-pane.active{ display:block; }
.log .ok{ color:#7fd996; } .log .danger{ color:#ff7c7c; } .log .warn{ color:#e6c473; }

/* 10. ROSTER ---------------------------------------------------------------- */
/* Hide dashboard roster implementations */
#dashboardCard .cast-roster{ display:none !important; }
#dashboardCard .list{ display:none !important; }
#dashboardCard [class*="roster"]{ display:none !important; }

.roster-list{ display:flex; flex-direction:column; gap:5px; }
.roster-row{
  display:grid; grid-template-columns:210px 1fr 42px; gap:8px; align-items:center;
  background:#16283b; border:1px solid #253a51; padding:6px 8px; border-radius:10px; font-size:.68rem; position:relative;
}
.roster-row.header{
  background:#1a2f45; font-size:.6rem; letter-spacing:.5px; font-weight:600; text-transform:uppercase; color:#b2c5d8;
}
.roster-row.evicted{ opacity:.55; }
.roster-row .avatar{ width:42px; height:42px; border-radius:11px; object-fit:cover; border:2px solid #2e4a67; box-shadow:0 4px 10px -6px rgba(0,0,0,.6); }
.roster-row .avatar.grayed{ filter:grayscale(.85) brightness(.65); }
.roster-row .cell.player .chip{ display:flex; gap:10px; align-items:center; }

/* Top roster container - Mobile-optimized with horizontal scroll */
#rosterBar{
  margin-bottom:8px;
  background:rgba(16,26,40,.4);
  border:1px solid rgba(48,68,96,.5);
  border-radius:12px;
  padding:10px 8px 8px;
  overflow:visible;
}

.top-roster-row{ 
  display:flex; 
  gap:12px; 
  align-items:flex-start; 
  justify-content:flex-start; 
  padding:4px 0 2px; 
  flex-wrap:nowrap;
  overflow-x:auto;
  overflow-y:hidden;
  -webkit-overflow-scrolling:touch;
  scrollbar-width:thin;
  scrollbar-color:rgba(100,150,200,0.5) transparent;
  /* Add padding at the end for better scroll experience */
  padding-right:12px;
  /* Scroll snap for smooth swiping between avatars */
  scroll-snap-type: x mandatory;
}

/* Smooth scrollbar styling */
.top-roster-row::-webkit-scrollbar{
  height:6px;
}

.top-roster-row::-webkit-scrollbar-track{
  background:rgba(20,34,52,0.3);
  border-radius:3px;
  margin:0 8px;
}

.top-roster-row::-webkit-scrollbar-thumb{
  background:rgba(100,150,200,0.5);
  border-radius:3px;
}

.top-roster-row::-webkit-scrollbar-thumb:hover{
  background:rgba(100,150,200,0.7);
}

.top-roster-tile{
  min-width:80px;
  width:var(--topTile,80px); 
  flex:0 0 auto; 
  position:relative; 
  isolation:isolate;
  /* Theme-aware gradient background */
  background:linear-gradient(145deg, var(--roster-gradient-1, #182636), var(--roster-gradient-2, #101a28));
  border:2px solid var(--roster-border, #2d4258);
  border-radius:16px;
  padding:12px 6px 22px; /* Extra bottom padding for badges */
  text-align:center; 
  font-size:.6rem; 
  display:flex; 
  flex-direction:column; 
  gap:4px;
  /* Enhanced transitions for modern effects */
  transition:transform .3s cubic-bezier(.25,.9,.25,1), box-shadow .3s, border-color .3s;
  /* Theme-aware glow */
  box-shadow:var(--roster-glow, 0 0 20px rgba(0,0,0,0.4));
  /* Scroll snap alignment */
  scroll-snap-align: start;
}
.top-roster-tile:hover{
  transform:translateY(-6px) scale(1.05);
  /* Enhanced theme-aware hover glow with glass reflection effect */
  box-shadow:var(--roster-hover-glow, 0 0 30px rgba(48,80,116,0.6), 0 0 60px rgba(48,80,116,0.3)),
             0 12px 28px -8px rgba(0,0,0,.7);
  border-color:var(--accent, #305074);
  /* Glass reflection overlay on hover */
  background:linear-gradient(145deg, var(--roster-gradient-1, #182636), var(--roster-gradient-2, #101a28)),
             linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 60%);
}
.top-roster-tile:active{
  transform:translateY(-4px) scale(1.03);
}
.top-roster-tile.evicted{ opacity:.5; }
.top-tile-avatar-wrap{
  position:relative; width:100%; aspect-ratio:1/1; border-radius:12px; overflow:hidden; display:flex; align-items:center; justify-content:center;
  background:var(--card); 
  box-shadow:0 3px 8px -2px rgba(0,0,0,.75) inset,
             0 1px 2px rgba(255,255,255,.1) inset;
  border:1px solid var(--line);
  transition:transform .3s;
}
.top-roster-tile:hover .top-tile-avatar-wrap{
  transform:scale(1.02);
}
.top-tile-avatar{ 
  width:100%; height:100%; object-fit:cover; 
  transition:filter .3s, transform .3s; 
}
.top-roster-tile:hover .top-tile-avatar{
  filter:brightness(1.1) saturate(1.1);
  transform:scale(1.05);
}
.top-tile-avatar.grayed{ filter:grayscale(.8) brightness(.65); }
.top-tile-name{
  font-size:.56rem; letter-spacing:.5px; font-weight:600; 
  color:var(--ink); 
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap; 
  line-height:1.15; width:100%; text-align:center;
  text-shadow:0 1px 2px rgba(0,0,0,0.3);
}

/* Status icon labels - icons displayed in place of name */
.top-tile-name.status-icon-label{
  font-size:1.4rem;
  line-height:1;
  padding:4px 0;
  letter-spacing:0.1em;
}

.top-tile-name.status-icon-label.hoh-icon,
.top-tile-name.status-icon-label.veto-icon{
  filter:drop-shadow(0 2px 4px rgba(0,0,0,0.6));
}

.top-tile-name.status-icon-label.hoh-pov-icons{
  display:flex;
  gap:4px;
  justify-content:center;
  align-items:center;
  filter:drop-shadow(0 2px 4px rgba(0,0,0,0.6));
}

.top-tile-name.status-icon-label.hoh-pov-icons .icon-hoh,
.top-tile-name.status-icon-label.hoh-pov-icons .icon-veto{
  font-size:1.3rem;
}

.top-tile-name.status-icon-label.medal-winner,
.top-tile-name.status-icon-label.medal-runner-up{
  font-size:1.6rem;
  filter:drop-shadow(0 2px 6px rgba(0,0,0,0.7));
}

/* OLD BADGE SYSTEM - Removed (icons now replace name text) */
/* Evicted Cross Overlay - Red calligraphic X over avatar */
.evicted-cross{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) rotate(-8deg);
  width:80%;
  height:80%;
  z-index:3;
  pointer-events:none;
  opacity:0.92;
  /* Theme-colored brush X */
  color:var(--bad, #d32f2f);
  filter:drop-shadow(0 0 8px currentColor);
  /* Static by default - only animate when .animating class is present */
}

.evicted-cross.animating{
  /* One-time animation on first appearance */
  animation:crossFadeIn 0.5s ease-out forwards;
}

.evicted-cross svg{
  width:100%;
  height:100%;
  stroke:currentColor;
  filter:drop-shadow(0 2px 6px rgba(0,0,0,0.6));
}

@keyframes crossFadeIn{
  0%{ opacity:0; transform:translate(-50%,-50%) scale(0.6) rotate(-25deg); }
  100%{ opacity:0.92; transform:translate(-50%,-50%) scale(1) rotate(-8deg); }
}

/* OLD BADGES - HIDDEN (deprecated, kept for compatibility) */
.hg-badges{ display:none !important; }
.hg-badge{ display:none !important; }
.badge-crown,.badge-veto,.badge-nom{ display:none !important; }
.ribbon-evicted{ display:none !important; } /* Replaced by evicted-cross */

/* Nominee pulse animation */
.top-tile-avatar-wrap.nominee-pulse .top-tile-avatar{
  animation:nomPulse 2s ease-in-out infinite;
}
@keyframes nomPulse{
  0%,100%{ box-shadow:0 0 0 0 rgba(220,60,60,0); }
  50%{ box-shadow:0 0 0 4px rgba(220,60,60,.6), 0 0 12px 2px rgba(220,60,60,.4); }
}

/* OLD BADGES - HIDDEN (gated for compatibility, not rendered by new code) */
.badge-crown,.badge-veto,.badge-nom{ display:none !important; }

/* Eviction ribbon (still used) */
.ribbon-evicted{ z-index:2; position:absolute; }
.ribbon-evicted{ top:50%; left:50%; transform:translate(-50%,-50%) rotate(-14deg); background:#222; padding:4px 10px; border:2px solid #333; font-size:.55rem; letter-spacing:.5px; font-weight:700; color:#bbb; border-radius:4px; opacity:.85; box-shadow:0 4px 14px -8px rgba(0,0,0,.8); }

.return-flash{ animation:returnFlash 1.8s ease-in-out 2; }
@keyframes returnFlash{
  0%{ box-shadow:0 0 0 0 rgba(140,210,255,0); }
  30%{ box-shadow:0 0 14px 0 rgba(140,210,255,.9),0 0 40px -10px rgba(140,210,255,.85); transform:scale(1.04); }
  70%{ box-shadow:0 0 10px 0 rgba(140,210,255,.4); }
  100%{ box-shadow:0 0 0 0 rgba(140,210,255,0); transform:scale(1); }
}

/* 11. LIVE VOTE / EVICTION UI ---------------------------------------------- */
.lvCol{ flex:1; }
.lvBarWrap{ height:14px; background:#1d2740; border:1px solid #2a3b5a; border-radius:8px; overflow:hidden; box-shadow:0 4px 10px -6px rgba(0,0,0,.7) inset; }
.lvBar{ height:100%; width:0%; background:#6fd3ff; box-shadow:0 0 8px -2px #6fd3ff; transition:width .25s; }
.lvBar.alt{ background:#74e48b; box-shadow:0 0 8px -2px #74e48b; }

/* 12. SETTINGS MODAL & FORMS ----------------------------------------------- */
.modal-backdrop{
  position:fixed; inset:0; background:rgba(4,10,18,.72);
  backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px);
  display:none; align-items:flex-start; justify-content:center; padding:40px 20px 60px; z-index:120;
}
.modal-backdrop.open{ display:flex; animation:fadeIn .35s ease; }
.modal{
  width:100%; max-width:960px; background:var(--card-2); border:1px solid #284058; border-radius:18px;
  padding:22px 26px 30px; position:relative; box-shadow:0 18px 48px -20px rgba(0,0,0,.75),0 6px 22px -8px rgba(0,0,0,.55);
  animation:popIn .45s ease; font-size:.75rem; line-height:1.35;
}
.modal h2{ margin-top:0; font-size:1.15rem; }
.closeX{
  position:absolute; top:10px; right:10px; background:#243a50; width:32px; height:32px; border:none; border-radius:10px;
  color:#d7e5f4; font-size:1rem; display:flex; align-items:center; justify-content:center; cursor:pointer; box-shadow:0 4px 10px -6px rgba(0,0,0,.65);
}
.closeX:hover{ background:#2c4c69; }

.modalTabs{ display:flex; flex-wrap:wrap; gap:8px; margin:6px 0 14px; }
.modalTabs .tab-btn{
  background:#203449; color:#c4d9ec; border:none; padding:6px 14px 7px; border-radius:8px;
  font-size:.63rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; cursor:pointer; transition:background .2s;
}
.modalTabs .tab-btn.active,.modalTabs .tab-btn:hover{ background:#2d4b6a; }

/* tabBar alias for modal tabs */
.tabBar{ display:flex; flex-wrap:wrap; gap:8px; margin:6px 0 14px; }
.tabBar .tab-btn{
  background:#203449; color:#c4d9ec; border:none; padding:6px 14px 7px; border-radius:8px;
  font-size:.63rem; font-weight:600; letter-spacing:.5px; text-transform:uppercase; cursor:pointer; transition:background .2s;
}
.tabBar .tab-btn.active,.tabBar .tab-btn:hover{ background:#2d4b6a; }

.settingsTabPane{ display:none; animation:fadeIn .35s ease; } .settingsTabPane.active{ display:block; }
.settingsGrid{ display:grid; gap:14px 16px; grid-template-columns: repeat(auto-fill, minmax(160px,1fr)); margin-top:12px; }
.settingsGrid label{ display:flex; flex-direction:column; gap:4px; font-size:.63rem; letter-spacing:.4px; color:#b2c2d5; font-weight:600; text-transform:uppercase; }
.settingsGrid input[type="number"],.settingsGrid input[type="text"],.settingsGrid select{
  background:#1b2e42; border:1px solid #2c4763; color:#e3edf7; padding:6px 8px; font-size:.72rem; border-radius:6px; font-family:inherit; transition:background .2s, border-color .2s;
}
.settingsGrid input:focus,.settingsGrid select:focus{ outline:none; background:#223b53; border-color:#3f6385; }
.toggleRow{ display:flex; flex-wrap:wrap; gap:14px 24px; margin:10px 0 6px; }
.toggleRow .inline{ display:flex; gap:6px; align-items:center; font-size:.65rem; letter-spacing:.4px; color:#c2d3e3; }
input[type="checkbox"]{ width:16px; height:16px; accent-color:#3575c2; cursor:pointer; }

/* 13. JURY HOUSE & FINALE --------------------------------------------------- */
#juryHousePanel{ font-size:.68rem; }
.jury-log{ height:150px; overflow:auto; background:#101c2a; border:1px solid #203347; padding:6px 8px; border-radius:8px; font-size:.63rem; }

#finaleDim{
  position:fixed; inset:0; background:rgba(8,14,20,.88);
  backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px);
  display:none; flex-direction:column; align-items:center; justify-content:center; z-index:300; gap:18px; animation:fadeIn .55s ease;
}
#finaleDim.show{ display:flex; }
.winnerBanner{ font-size:1.4rem; letter-spacing:1px; font-weight:700; color:#ffdc8b; text-shadow:0 0 22px rgba(255,220,140,.6); }
.winnerName{ font-size:2.1rem; font-weight:700; letter-spacing:1.2px; color:#e8f4ff; text-shadow:0 0 16px rgba(140,200,255,.8); }
#finaleActions{ display:flex; gap:14px; }

/* 14. AMERICA’S VOTE — RETURN TWIST ---------------------------------------- */
.returnTwistHost{
  background:#182a3b; border:1px solid #26405b; padding:14px 16px 18px; border-radius:16px;
  box-shadow:0 8px 20px -14px rgba(0,0,0,.65); position:relative; animation:fadeIn .6s ease;
  font-size:.7rem; line-height:1.3;
}
.rtHeader{ margin:0 0 6px; font-size:.95rem; font-weight:600; letter-spacing:.6px; }
.rtGrid{ display:grid; gap:14px; grid-template-columns:repeat(auto-fit, minmax(160px, 1fr)); margin:12px 0 10px; }
.rtCard{
  --rtScale:1; position:relative; background:linear-gradient(145deg,#1d3044,#132132);
  border:1px solid #2c4b68; border-radius:16px; padding:12px; display:flex; flex-direction:column; gap:7px; align-items:center; justify-content:flex-start; text-align:center;
  font-size:.62rem; transform:scale(var(--rtScale)); transition:transform .35s ease, box-shadow .35s ease, border-color .35s ease;
  box-shadow:0 10px 22px -14px rgba(0,0,0,.65),0 0 0 1px rgba(90,150,220,.15);
}
.rtCard.leader{ border-color:#ffd166; box-shadow:0 0 0 1px rgba(255,209,102,.4),0 14px 28px -16px rgba(0,0,0,.9); animation:pulseLeader 1.9s ease-in-out infinite; }
@keyframes pulseLeader{ 0%,100%{ box-shadow:0 0 0 1px rgba(255,209,102,.25),0 10px 20px -14px rgba(0,0,0,.85);} 50%{ box-shadow:0 0 18px -2px rgba(255,209,102,.65),0 10px 22px -12px rgba(0,0,0,.8);} }
.rtCard.flash{ animation:flashCard .9s ease; }
@keyframes flashCard{ 0%{ box-shadow:0 0 0 0 rgba(255,255,255,0); transform:scale(1.02);} 40%{ box-shadow:0 0 18px 0 rgba(255,255,255,.35); transform:scale(1.06);} 100%{ box-shadow:0 0 0 0 rgba(255,255,255,0); transform:scale(1.02);} }
.rtAvatarWrap{ position:relative; width:72px; height:72px; border-radius:16px; overflow:hidden; background:#122331; box-shadow:0 5px 14px -10px rgba(0,0,0,.8), 0 0 0 1px #2b4e6f; }
.rtAvatar{ width:100%; height:100%; object-fit:cover; filter:saturate(.9); transition:filter .4s; }
.rtCard.leader .rtAvatar{ filter:saturate(1.15) brightness(1.05); }
.rtAvatarRing{ position:absolute; inset:0; border:2px solid rgba(255,255,255,.08); border-radius:inherit; pointer-events:none; box-shadow:inset 0 0 12px -4px rgba(255,255,255,.25); transition:border-color .4s, box-shadow .4s; }
.rtCard.leader .rtAvatarRing{ border-color:#ffd166; box-shadow:inset 0 0 16px -4px rgba(255,209,102,.55),0 0 6px -2px rgba(255,209,102,.55); }
.rtName{ font-weight:600; letter-spacing:.4px; color:#d6e6f7; font-size:.6rem; line-height:1.15; max-width:100%; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.rtCard.leader .rtName{ color:#ffe199; text-shadow:0 0 4px rgba(255,220,120,.6); }
.rtBarOuter{ width:100%; height:12px; background:#142335; border:1px solid #20384f; border-radius:8px; overflow:hidden; box-shadow:0 2px 6px -3px rgba(0,0,0,.7) inset; }
.rtBarFill{ position:relative; height:100%; width:0%; background:linear-gradient(90deg,#4d8dff,#79d7ff); box-shadow:0 0 6px -2px #66aefe; transition:width .25s; overflow:hidden; }
.rtBarFill::after{ content:''; position:absolute; inset:0; background:linear-gradient(120deg, transparent 0%, rgba(255,255,255,.35) 50%, transparent 100%); animation:barSheen 2.2s linear infinite; mix-blend-mode:overlay; opacity:.55; }
@keyframes barSheen{ 0%{ transform:translateX(-100%);} 100%{ transform:translateX(100%);} }
.rtPct{ font-size:.56rem; font-weight:700; letter-spacing:.6px; color:#b9cbde; }
.rtCard.leader .rtPct{ color:#ffe199; }
.rtNote{ margin-top:2px; opacity:.75; font-size:.58rem; letter-spacing:.4px; }
#rtCountdown{ font-size:.62rem; font-weight:600; letter-spacing:.5px; color:#c8d9eb; }

/* 15. TOOLTIP / PROFILE POPOVER -------------------------------------------- */
.profile-tip{
  position:fixed; z-index:160; background:#182738; border:1px solid #2c4662; border-radius:14px;
  box-shadow:0 12px 30px -16px rgba(0,0,0,.75); padding:10px 14px 14px; width:270px; pointer-events:none; font-size:.68rem; animation:fadeIn .25s ease;
}
.profile-tip .pt-head{ display:flex; gap:12px; }
.profile-tip .pt-ava-wrap{ width:56px; height:56px; border-radius:12px; overflow:hidden; background:#102030; box-shadow:0 2px 6px -2px #000 inset; }
.profile-tip .pt-ava{ width:100%; height:100%; object-fit:cover; }
.profile-tip .pt-name{ font-weight:600; font-size:.78rem; letter-spacing:.5px; margin-bottom:2px; }
.profile-tip .pt-row{ display:flex; gap:8px; margin-top:4px; }
.profile-tip .pt-label{ width:54px; color:#a9bccd; }
.profile-tip .pt-motto{ margin:4px 0 2px; font-style:italic; }

/* 15b. BIO PANEL (Rich Player Profiles) ------------------------------------ */
.profile-panel{
  position:fixed; z-index:650; 
  background:linear-gradient(145deg, #1a2e42, #0f1c2d);
  border:1px solid #3d5a72; border-radius:16px;
  box-shadow:0 16px 48px -18px rgba(0,0,0,.85);
  padding:20px; max-width:340px; width:90vw;
  font-size:.7rem; line-height:1.4;
  animation:bioFadeIn .3s ease;
  transition:opacity .15s ease;
}

.profile-panel.mobile{
  position:fixed; bottom:0; left:0; right:0;
  max-width:100%; width:100%;
  border-radius:20px 20px 0 0;
  animation:bioSlideUp .35s cubic-bezier(.25,.9,.25,1);
  max-height:75vh; overflow-y:auto;
}

.bio-close-btn{
  position:absolute; top:12px; right:12px;
  background:rgba(0,0,0,.3); border:none; border-radius:50%;
  width:32px; height:32px; font-size:1.2rem; line-height:1;
  color:#c8dae8; cursor:pointer;
  display:flex; align-items:center; justify-content:center;
  transition:background .2s;
}
.bio-close-btn:hover{
  background:rgba(0,0,0,.5);
}

.bio-avatar-container{
  display:flex; justify-content:center; margin-bottom:16px;
}
.bio-avatar{
  width:120px; height:120px; border-radius:16px;
  object-fit:cover; border:3px solid #3d5a72;
  box-shadow:0 4px 12px -4px rgba(0,0,0,.6);
}

@media (max-width: 639px) {
  .bio-avatar{
    width:96px; height:96px;
  }
}

.bio-content{
  text-align:center;
}

.bio-name{
  font-size:1.2rem; font-weight:700; letter-spacing:.6px;
  color:#e8f4ff; margin:0 0 14px;
}

.bio-grid{
  display:grid; grid-template-columns:minmax(80px,auto) 1fr;
  gap:8px 14px; margin:0;
  text-align:left; max-height:260px; overflow-y:auto;
}

.bio-grid dt{
  font-weight:600; color:#8ca8be; font-size:.68rem;
  letter-spacing:.4px;
}

.bio-grid dd{
  margin:0; color:#d4e3f0; font-size:.72rem;
}

.bio-motto{
  font-style:italic; color:#b9d4e8;
}

.bio-occupation{
  font-weight:600; color:#9fc5e8;
}

@keyframes bioFadeIn{
  from{ opacity:0; transform:scale(.95); }
  to{ opacity:1; transform:scale(1); }
}

@keyframes bioSlideUp{
  from{ transform:translateY(100%); opacity:0; }
  to{ transform:translateY(0); opacity:1; }
}

/* 16. MINIGAME / COMPETITION STUBS ----------------------------------------- */
.minigame-host{
  background:#182a3b; border:1px solid #26405b; padding:12px 14px 14px; border-radius:14px;
  box-shadow:0 6px 16px -10px rgba(0,0,0,0.6); font-size:.7rem; line-height:1.3; position:relative;
}
.minigame-host h3{ margin:0 0 6px; font-size:.9rem; font-weight:600; }
.minigame-grid-placeholder{ display:grid; gap:10px; grid-template-columns:repeat(auto-fit, minmax(60px,1fr)); margin-top:8px; }
.minigame-cell{
  background:#21364b; aspect-ratio:1/1; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:.6rem; color:#b9cfe2;
}
.compScoreboard{ margin-top:10px; border:1px solid #2a4561; background:#132435; border-radius:10px; padding:8px 10px; font-size:.62rem; }
.compScoreboard ul{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:4px; }
.compScoreboard li{
  display:flex; justify-content:space-between; align-items:center; background:#1b2f42; padding:4px 8px 5px; border-radius:6px; letter-spacing:.3px; font-weight:600; color:#d5e4f2;
}

/* 17. CONFETTI -------------------------------------------------------------- */
#confetti{ pointer-events:none; mix-blend-mode:screen; }

/* 18. UTILITIES ------------------------------------------------------------- */
.hidden{ display:none!important; }
.flex{ display:flex; } .flex-col{ display:flex; flex-direction:column; } .flex-center{ display:flex; align-items:center; justify-content:center; }
.space-between{ justify-content:space-between; } .wrapline{ flex-wrap:wrap; }
.gap4{ gap:4px; } .gap6{ gap:6px; } .gap8{ gap:8px; } .gap12{ gap:12px; }
.m0{ margin:0!important; } .mt4{ margin-top:4px!important; } .mt6{ margin-top:6px!important; } .mt8{ margin-top:8px!important; } .mt12{ margin-top:12px!important; }
.mb4{ margin-bottom:4px!important; } .mb6{ margin-bottom:6px!important; } .mb8{ margin-bottom:8px!important; } .mb12{ margin-bottom:12px!important; }
.p4{ padding:4px!important; } .p8{ padding:8px!important; }
.text-center{ text-align:center; } .text-right{ text-align:right; }
.upper{ text-transform:uppercase; } .bold{ font-weight:700; }
.rounded{ border-radius:8px; } .border{ border:1px solid #2d4764; }
.overlay-blur{ backdrop-filter:blur(6px); -webkit-backdrop-filter:blur(6px); }
.truncate{ overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Cast table (single, deduped block) */
#castTbl{ table-layout:fixed; width:100%; border-collapse:separate; border-spacing:0 6px; }
#castTbl col.col-player{ width:185px; }
#castTbl col.col-state{ width:70px; }
#castTbl col.col-evictweek{ width:68px; }
#castTbl col.col-allies{ width:150px; }
#castTbl col.col-enemies{ width:150px; }
#castTbl col.col-avg{ width:68px; }
#castTbl col.col-actions{ width:40px; }
#castTbl thead th{
  font-size:.58rem; letter-spacing:.55px; text-transform:uppercase; font-weight:700;
  padding:4px 6px 6px; color:#afc3d6; background:#172433; text-align:left;
}
#castTbl tbody tr{ background:#152434; border:1px solid #24394e; transition:background .18s; }
#castTbl tbody tr:hover{ background:#1d3145; }
#castTbl td{
  font-size:.64rem; padding:6px 8px 7px; vertical-align:middle; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
#castTbl th:nth-child(2),#castTbl td:nth-child(2),
#castTbl th:nth-child(3),#castTbl td:nth-child(3),
#castTbl th:nth-child(6),#castTbl td:nth-child(6),
#castTbl th:nth-child(7),#castTbl td:nth-child(7){ text-align:center; }
#castTbl td:nth-child(4),#castTbl td:nth-child(5){
  white-space:normal; line-height:1.1; font-size:.55rem; overflow:hidden; max-height:2.4em;
}
#castTbl td.state-col span{ display:inline-block; min-width:42px; text-align:center; }
#dashboardCard h2.week-duplicate-heading{ display:none!important; }

/* 19. MEDIA QUERIES --------------------------------------------------------- */
@media (max-width:1250px){
  .wrap{ grid-template-columns:280px minmax(420px,1fr); }
}
@media (max-width:900px){
  /* Mobile stacking: single column */
  .wrap{ grid-template-columns:1fr; align-items:stretch; justify-items:stretch; }
  #dashboardCard{ grid-column:1; grid-row:auto; width:100%; max-width:none; margin-left:0; margin-right:0; justify-self:stretch; }
  #sideCard{ grid-column:1; grid-row:auto; width:100%; max-width:none; margin-left:0; margin-right:0; justify-self:stretch; }
  #actionCard{ grid-column:1; grid-row:auto; width:100%; max-width:none; margin-left:0; margin-right:0; justify-self:stretch; }
  .wrap > .card{ width:100%; max-width:none; margin-left:0; margin-right:0; justify-self:stretch; }
  .tv{ height:260px; }
}
@media (max-width:540px){
  .modal{ padding:18px 16px 24px; border-radius:16px; }
  .settingsGrid{ grid-template-columns:repeat(auto-fill,minmax(130px,1fr)); }
  .rtGrid{ grid-template-columns:repeat(auto-fit,minmax(120px,1fr)); }
  .top-roster-row{ justify-content:center; }
}

/* Mobile card constraints */
@media (max-width:640px){
  .revealCard{
    max-width:calc(100vw - 24px);
    max-height:calc(100vh - 160px);
    padding:14px 16px 16px;
    font-size:.72rem;
  }
  .revealCard h3{ font-size:.95rem; }
  
  /* Diary Room Card mobile adjustments */
  .revealCard.diaryRoomCard{
    max-width:calc(100vw - 32px);
    padding:18px 20px 20px;
  }
  
  /* Decision cards in social phase */
  .decisionCard{
    max-width:calc(100vw - 32px) !important;
    padding:12px 14px 14px !important;
  }
}

/* 20. ANIMATIONS ------------------------------------------------------------ */
@keyframes fadeIn{ from{ opacity:0; transform:translateY(12px);} to{ opacity:1; transform:translateY(0);} }
@keyframes popIn{ 0%{ opacity:0; transform:scale(.85);} 60%{ opacity:1; transform:scale(1.03);} 100%{ opacity:1; transform:scale(1);} }
@keyframes cardFloatIn{ 0%{ opacity:0; transform:translateY(24px) scale(.92) rotateX(10deg);} 55%{ opacity:1; transform:translateY(-4px) scale(1.01) rotateX(0deg);} 100%{ opacity:1; transform:translateY(0) scale(1);} }
@keyframes cardBreathe{ 0%,100%{ transform:translateY(0) scale(1);} 50%{ transform:translateY(-3px) scale(1.012);} }
@keyframes cardAvatarIn{ 0%{ opacity:0; transform:translateY(14px) scale(.92);} 70%{ opacity:1; transform:translateY(-3px) scale(1.02);} 100%{ opacity:1; transform:translateY(0) scale(1);} }

/* Crown pulse animation for competition winners */
.crownPulse{
  animation:crownPulse 1.6s ease-in-out infinite;
}
@keyframes crownPulse{
  0%, 100%{ transform:scale(1); filter:drop-shadow(0 0 4px rgba(255,220,120,.6)); }
  50%{ transform:scale(1.15); filter:drop-shadow(0 0 12px rgba(255,220,120,1)); }
}

/* Intro card slide animations */
@keyframes slideIn{
  0%{ opacity:0; transform:translateY(40px) scale(.9); }
  100%{ opacity:1; transform:translateY(0) scale(1); }
}
@keyframes slideOut{
  0%{ opacity:1; transform:translateY(0) scale(1); }
  100%{ opacity:0; transform:translateY(-40px) scale(.9); }
}

/* Social event color classes */
.soc-pos, .log .soc-pos{ color:#6ff5a4 !important; }
.soc-neg, .log .soc-neg{ color:#ff9f5c !important; }

/* ============================================================================
   BIG BROTHER GAME — REFACTORED STYLES (compact)
   Only the sections touched for this request are shown below.
   ============================================================================ */

/* 01. TOKENS (only TV-related variables shown) */
:root{
  --tv-safe-top: 56px;     /* room for header */
  --tv-safe-bottom: 66px;  /* room for ticker */
  --tv-safe-x: 18px;       /* side padding */
}

/* 07. TV / SHOW PANEL (safe areas and responsive height) */
.tv{
  position:relative;
  height: clamp(280px, 42vh, 520px);
  /* Default background with tvscreen.jpg and overlay for blending */
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    url('assets/videos/tvscreen.jpg') center/cover;
  background-color:#0e1730; /* Fallback */
  border:2px solid #213349; border-radius:18px; overflow:hidden;
  display:flex; flex-direction:column; justify-content:flex-start; padding:0; font-size:.72rem;
  box-shadow:0 16px 36px -22px rgba(0,0,0,.75);
}
/* Custom TV background support (when user sets custom image) */
.tv.hasTvBg{
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    var(--tv-bg) center/cover;
  background-color:#0e1730;
}
.tv.tvTall{
  height: clamp(340px, 52vh, 600px);
}

.tvHead{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;
  padding:10px 14px 8px; border-bottom:1px solid rgba(120,210,255,.07);
  background:linear-gradient(180deg, rgba(13,24,38,.45), rgba(7,14,24,.2));
}
.tvTitle{ font-weight:600; letter-spacing:.6px; font-size:.75rem; color:#c7d7eb; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.tvTimer{ font-size:.95rem; font-weight:600; color:#e2edf8; white-space:nowrap; }

#tvOverlay{
  position:absolute; z-index:12;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  pointer-events:auto;  /* allow interactive cards */
  display:flex; align-items:center; justify-content:center; flex-direction:column; gap:8px;
}

#confetti{
  position:absolute; z-index:11;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  pointer-events:none; mix-blend-mode:screen; opacity:.95;
}

.tvNow{
  position:absolute; z-index:13;
  left:var(--tv-safe-x); right:var(--tv-safe-x); bottom:8px;
  min-height:28px; padding:6px 10px; border-radius:8px; font-size:.82rem;
  background:linear-gradient(180deg, rgba(9,24,40,.85), rgba(6,14,24,.85)),
             linear-gradient(90deg, rgba(111,211,255,.18), rgba(103,255,168,.12));
  border:1px solid rgba(120,210,255,.22); box-shadow:0 4px 18px -12px rgba(0,0,0,.8);
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  pointer-events:none; /* ticker never intercepts clicks */
}

/* 08. Reveal Cards (fit inside the screen and scroll if tall) */
.revealCard{
  background:linear-gradient(135deg, rgba(28,43,62,.92), rgba(12,22,36,.88));
  border:1px solid rgba(110,160,220,.18);
  position:relative; overflow:auto;  /* was hidden; now scrolls if needed */
  text-align:center; font-size:.78rem; line-height:1.45;
  padding:18px 20px 20px; border-radius:20px;
  box-shadow:0 8px 24px -12px rgba(0,0,0,.65), 0 0 0 1px rgba(120,180,255,.08), 0 0 22px -6px rgba(90,150,255,.35) inset;
  animation:cardFloatIn .65s cubic-bezier(.25,.9,.25,1) forwards;
  max-width:min(780px, 92vw);
  max-height: calc(100% - 12px);  /* keep within safe area */
  overscroll-behavior:contain;
  overflow-wrap:anywhere; word-break:break-word;
}
.revealCard h3{
  font-size:1.05rem; letter-spacing:.8px; margin:0 0 .55em; font-weight:600;
  background:linear-gradient(90deg,#ddecff,#8fc3ff); -webkit-background-clip:text; color:transparent;
  text-shadow:0 0 18px rgba(140,200,255,.35);
}

/* Avatar rail stays compact; no overflow */
.revealCard.has-avatars{ display:flex; align-items:stretch; text-align:left; gap:16px; }
.rc-avatar-rail{ flex:0 0 74px; display:flex; flex-direction:column; gap:8px; padding-top:2px; }
.rc-avatar-rail .rc-av{
  width:70px; height:70px; border-radius:16px; object-fit:cover; background:#101c28; border:2px solid #356089;
  box-shadow:0 6px 18px -10px rgba(0,0,0,.65);
}
.revealCard.has-avatars .rc-body{ flex:1 1 auto; min-width:0; }

/* 14. America’s Vote (unchanged visually from prior refactor) */
/* ... keep your existing AV styles ... */

/* 20. Animations */
@keyframes cardFloatIn{
  0%{ opacity:0; transform:translateY(24px) scale(.92) rotateX(10deg); }
  55%{ opacity:1; transform:translateY(-4px) scale(1.01) rotateX(0deg); }
  100%{ opacity:1; transform:translateY(0) scale(1); }
}

/* NEW: Gradient animation for enhanced text effects */
@keyframes gradientShift{
  0%, 100%{ background-position:0% 50%; }
  50%{ background-position:100% 50%; }
}

/* ============================================================================
   BIG BROTHER GAME — REFACTORED STYLES (compact)
   Only sections touched in this update are included or adjusted.
   If you previously adopted the refactor, this is a drop-in replacement.
   ============================================================================ */

/* 01. TOKENS (TV-safe tuned a bit larger) */
:root{
  --bg:#0d151f;
  --card:#132132;
  --ink:#e3ecf5;
  --muted:#95a9c0;

  --tv-safe-top: 56px;     /* header strip space */
  --tv-safe-bottom: 66px;  /* ticker space */
  --tv-safe-x: 18px;       /* side space */
}

/* Basic reset kept concise */
*{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
html,body{ margin:0; padding:0; height:100%; background:var(--bg); color:var(--ink);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,"Helvetica Neue",Arial,sans-serif;
  line-height:1.4; -webkit-font-smoothing:antialiased; }
img{ max-width:100%; display:block; }
::-webkit-scrollbar{ width:10px; height:10px; }
::-webkit-scrollbar-track{ background:#0f1f31; }
::-webkit-scrollbar-thumb{ background:#26435d; border-radius:6px; }
::-webkit-scrollbar-thumb:hover{ background:#31587a; }

/* 07. TV / SHOW PANEL — TV Frame with Bezel and Viewport */
.tvFrame{
  position:relative;
  padding:12px;
  background:linear-gradient(145deg, #1a2939, #0f1b28);
  border-radius:24px;
  box-shadow:0 20px 50px -20px rgba(0,0,0,.85), 
             inset 0 2px 4px rgba(255,255,255,.05),
             inset 0 -2px 4px rgba(0,0,0,.25);
}
.tvBezel{
  position:relative;
  padding:8px;
  background:linear-gradient(135deg, #141f2d, #0a1419);
  border-radius:18px;
  border:1px solid #24364b;
  box-shadow:inset 0 0 24px rgba(0,0,0,.5);
}
.tv{
  position:relative;
  height: clamp(280px, 42vh, 520px);
  /* Default background with tvscreen.jpg and overlay for blending */
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    url('assets/videos/tvscreen.jpg') center/cover;
  background-color:#0e1730; /* Fallback */
  border:2px solid #213349; border-radius:16px; overflow:hidden;
  display:flex; flex-direction:column; justify-content:flex-start; padding:0; font-size:.72rem;
  box-shadow:0 16px 36px -22px rgba(0,0,0,.75);
}
/* Custom TV background support (when user sets custom image) */
.tv.hasTvBg{
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    var(--tv-bg) center/cover;
  background-color:#0e1730;
}
.tv.tvTall{ height: clamp(340px, 52vh, 600px); }
.tvViewport{
  position:relative;
  flex:1;
  overflow:hidden;
  display:flex;
  flex-direction:column;
}

.tvHead{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;
  padding:10px 14px 8px; border-bottom:1px solid rgba(120,210,255,.07);
  background:linear-gradient(180deg, rgba(13,24,38,.45), rgba(7,14,24,.2));
}
.tvTitle{ font-weight:600; letter-spacing:.6px; font-size:.75rem; color:#c7d7eb; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.tvTimer{ font-size:.95rem; font-weight:600; color:#e2edf8; white-space:nowrap; }

#tvOverlay{
  position:absolute; z-index:12;
  inset:0;
  pointer-events:auto; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:8px;
}
#confetti{
  position:absolute; z-index:11;
  inset:0;
  pointer-events:none; mix-blend-mode:screen; opacity:.95;
}
.tvNow{
  position:absolute; z-index:13;
  left:var(--tv-safe-x); right:var(--tv-safe-x); bottom:8px;
  min-height:28px; padding:6px 10px; border-radius:8px; font-size:.82rem;
  background:linear-gradient(180deg, rgba(9,24,40,.85), rgba(6,14,24,.85)),
             linear-gradient(90deg, rgba(111,211,255,.18), rgba(103,255,168,.12));
  border:1px solid rgba(120,210,255,.22); box-shadow:0 4px 18px -12px rgba(0,0,0,.8);
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  pointer-events:none; /* ticker never intercepts clicks */
}

/* LIVE badge for voting phases */
.liveBadge{
  position:absolute;
  bottom:16px;
  right:16px;
  z-index:20;
  padding:6px 14px;
  background:#ff3333;
  color:#fff;
  font-weight:700;
  font-size:.75rem;
  letter-spacing:1px;
  border-radius:6px;
  box-shadow:0 4px 12px rgba(255,51,51,.5);
  animation:liveBlink 1.5s ease-in-out infinite;
  pointer-events:none;
}
@keyframes liveBlink{
  0%, 100%{ opacity:1; }
  50%{ opacity:.5; }
}

/* 08. Reveal Cards — fit within screen and scroll if tall; supports avatar rows */
.revealCard{
  background:linear-gradient(135deg, rgba(28,43,62,.92), rgba(12,22,36,.88));
  border:1px solid rgba(110,160,220,.18);
  position:relative; overflow:auto; /* allow internal scroll if needed */
  text-align:center; font-size:.78rem; line-height:1.45;
  padding:18px 20px 20px; border-radius:20px;
  box-shadow:0 8px 24px -12px rgba(0,0,0,.65), 0 0 0 1px rgba(120,180,255,.08), 0 0 22px -6px rgba(90,150,255,.35) inset;
  animation:cardFloatIn .65s cubic-bezier(.25,.9,.25,1) forwards;
  max-width:min(780px, 92vw); max-height: calc(100% - 12px);
  overscroll-behavior:contain; overflow-wrap:anywhere; word-break:break-word;
}
.revealCard h3{
  font-size:1.05rem; letter-spacing:.8px; margin:0 0 .55em; font-weight:600;
  background:linear-gradient(90deg,#ddecff,#8fc3ff); -webkit-background-clip:text; color:transparent;
  text-shadow:0 0 18px rgba(140,200,255,.35);
}
.revealCard.bigAnnounce{
  max-width: clamp(340px, 64vw, 820px);
  background:linear-gradient(135deg,#1a3147,#0e1a29 60%);
  border:1px solid rgba(120,210,255,.25);
  box-shadow:0 16px 48px -20px rgba(0,0,0,.85), 0 0 0 1px rgba(120,210,255,.18), 0 0 52px -14px rgba(120,210,255,.55) inset;
  font-size:.82rem; padding:26px 32px 30px; border-radius:26px; text-align:center;
}

/* Face row avatars (1–4) shown below card text */
.rc-face-row{
  display:flex; align-items:center; justify-content:center;
  gap:14px; margin-top:12px; flex-wrap:nowrap;
}
.rc-face{
  width:62px; height:62px; border-radius:14px; object-fit:cover;
  background:#101c28; border:2px solid #356089; box-shadow:0 6px 18px -10px rgba(0,0,0,.65);
}
.rc-face.small{ width:54px; height:54px; border-radius:12px; }
.rc-face.xs{ width:48px; height:48px; border-radius:10px; }
.rc-arrow{
  width:28px; height:28px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,#cfe9ff,#7fd0ff);
  color:#0d1b2a; font-weight:800; box-shadow:0 2px 10px -4px rgba(0,0,0,.5);
  user-select:none;
}

/* 10. Cast table — Evict Wk column never spills */
#castTbl{ table-layout:fixed; width:100%; border-collapse:separate; border-spacing:0 6px; }
#castTbl col.col-evictweek{ width:60px; } /* was 68 — tightened */
#castTbl thead th{
  font-size:.58rem; letter-spacing:.55px; text-transform:uppercase; font-weight:700;
  padding:4px 6px 6px; color:#afc3d6; background:#172433; text-align:left;
}
#castTbl tbody tr{ background:#152434; border:1px solid #24394e; transition:background .18s; }
#castTbl tbody tr:hover{ background:#1d3145; }
#castTbl td{
  font-size:.64rem; padding:6px 8px 7px; vertical-align:middle; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
}
/* center numeric-like columns (state, evict wk, avg, actions) */
#castTbl th:nth-child(2),#castTbl td:nth-child(2),
#castTbl th:nth-child(3),#castTbl td:nth-child(3),
#castTbl th:nth-child(6),#castTbl td:nth-child(6),
#castTbl th:nth-child(7),#castTbl td:nth-child(7){ text-align:center; }
/* allies / enemies allow two lines */
#castTbl td:nth-child(4),#castTbl td:nth-child(5){ white-space:normal; line-height:1.1; font-size:.55rem; overflow:hidden; max-height:2.4em; }
/* Evict week cell hard clamp */
#castTbl td:nth-child(3){ max-width:60px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* 20. Animations */
@keyframes cardFloatIn{
  0%{ opacity:0; transform:translateY(24px) scale(.92) rotateX(10deg); }
  55%{ opacity:1; transform:translateY(-4px) scale(1.01) rotateX(0); }
  100%{ opacity:1; transform:translateY(0) scale(1); }
}

/* === TV fit + reveal card cleanup ======================================= */
/* Safe areas for on-screen content (slightly larger so no clipping) */
:root{
  --tv-safe-top: 60px;     /* header strip space */
  --tv-safe-bottom: 80px;  /* ticker space */
  --tv-safe-x: 20px;       /* side space */
}

/* TV dimensions scale with content */
.tv{
  position:relative;
  height: clamp(300px, 44vh, 560px);
  /* Default background with tvscreen.jpg and overlay for blending */
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    url('assets/videos/tvscreen.jpg') center/cover;
  background-color:#0e1730; /* Fallback */
  border:2px solid #213349; border-radius:18px; overflow:hidden;
  display:flex; flex-direction:column; justify-content:flex-start; padding:0;
  font-size:.72rem; box-shadow:0 16px 36px -22px rgba(0,0,0,.75);
}
/* Custom TV background support (when user sets custom image) */
.tv.hasTvBg{
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    var(--tv-bg) center/cover;
  background-color:#0e1730;
}
.tv.tvTall{ height: clamp(360px, 56vh, 640px); }

.tvHead{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;
  padding:10px 14px 8px; border-bottom:1px solid rgba(120,210,255,.07);
  background:linear-gradient(180deg, rgba(13,24,38,.45), rgba(7,14,24,.2));
}
.tvTitle{ font-weight:600; letter-spacing:.6px; font-size:.75rem; color:#c7d7eb; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.tvTimer{ font-size:.95rem; font-weight:600; color:#e2edf8; white-space:nowrap; }

/* Overlay and ticker respect safe area */
#tvOverlay{
  position:absolute; z-index:12;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  display:flex; align-items:center; justify-content:center; flex-direction:column; gap:8px;
  pointer-events:auto;
}
#confetti{
  position:absolute; z-index:11;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  pointer-events:none; mix-blend-mode:screen; opacity:.95;
}
.tvNow{
  position:absolute; z-index:13;
  left:var(--tv-safe-x); right:var(--tv-safe-x); bottom:10px;
  min-height:28px; padding:6px 10px; border-radius:8px; font-size:.82rem;
  background:linear-gradient(180deg, rgba(9,24,40,.85), rgba(6,14,24,.85)),
             linear-gradient(90deg, rgba(111,211,255,.18), rgba(103,255,168,.12));
  border:1px solid rgba(120,210,255,.22); box-shadow:0 4px 18px -12px rgba(0,0,0,.8);
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  pointer-events:none;
}

/* Reveal card fits within screen; no scrollbar unless needed */
.revealCard{
  background:linear-gradient(135deg, rgba(28,43,62,.92), rgba(12,22,36,.88));
  border:1px solid rgba(110,160,220,.18);
  position:relative;
  text-align:center; font-size:.78rem; line-height:1.45;
  padding:18px 20px 20px; border-radius:20px;
  box-shadow:0 8px 24px -12px rgba(0,0,0,.65), 0 0 0 1px rgba(120,180,255,.08), 0 0 22px -6px rgba(90,150,255,.35) inset;
  animation:cardFloatIn .65s cubic-bezier(.25,.9,.25,1) forwards;
  max-width:min(780px, 92vw);
  max-height: calc(100% - 14px);
  overflow: hidden;             /* hide by default */
}
.revealCard:hover{ overflow:auto; } /* only show scroll if user intends */
.revealCard::-webkit-scrollbar{ width:8px; }
.revealCard::-webkit-scrollbar-thumb{ background:#2b4460; border-radius:8px; }
.revealCard h3{
  font-size:1.05rem; letter-spacing:.8px; margin:0 0 .55em; font-weight:600;
  background:linear-gradient(90deg,#ddecff,#8fc3ff); -webkit-background-clip:text; color:transparent;
  text-shadow:0 0 18px rgba(140,200,255,.35);
}

/* Face-row avatars (below text) with arrow between for 2-face scenarios */
.rc-face-row{
  display:flex; align-items:center; justify-content:center;
  gap:14px; margin-top:12px; flex-wrap:nowrap;
}
.rc-face{
  width:62px; height:62px; border-radius:14px; object-fit:cover;
  background:#101c28; border:2px solid #356089; box-shadow:0 6px 18px -10px rgba(0,0,0,.65);
}
.rc-face.small{ width:54px; height:54px; border-radius:12px; }
.rc-face.xs{ width:48px; height:48px; border-radius:10px; }
.rc-arrow{
  width:28px; height:28px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,#cfe9ff,#7fd0ff);
  color:#0d1b2a; font-weight:800; box-shadow:0 2px 10px -4px rgba(0,0,0,.5);
  user-select:none;
}

/* === Jury Ballots Panel (finale) ========================================= */
.juryPanelHost{
  background:#182a3b;
  border:1px solid #26405b;
  padding:14px 16px 16px;
  border-radius:16px;
  box-shadow:0 8px 20px -14px rgba(0,0,0,.65);
  font-size:.7rem; line-height:1.3;
}
.juryPanelHost h3{ margin:0 0 8px; font-size:.95rem; font-weight:600; }
.juryGrid{
  display:grid; gap:12px;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
}
.jpTile{
  background:#1b2f42;
  border:1px solid #2a4561;
  border-radius:12px;
  padding:10px 12px;
  display:flex; flex-direction:column; gap:8px;
}
.jpHead{ display:flex; align-items:center; gap:10px; }
.jpHead .jpJuror{
  width:38px; height:38px; border-radius:10px; object-fit:cover;
  background:#0f1b2a; border:2px solid #315677;
}
.jpHead .jpName{ font-weight:700; letter-spacing:.4px; }

.jpRow{
  display:flex; align-items:center; justify-content:center; gap:10px;
}
.jpFace{
  width:54px; height:54px; border-radius:12px; object-fit:cover;
  background:#0f1b2a; border:2px solid #315677; box-shadow:0 6px 14px -10px rgba(0,0,0,.65);
  opacity:.8;
}
.jpFace.finalist{ opacity:1; }
.jpArrow{
  width:26px; height:26px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,#cfe9ff,#7fd0ff);
  color:#0d1b2a; font-weight:800;
}
.jpPick .jpFace.finalist{ border-color:#7fd0ff; box-shadow:0 0 0 1px rgba(127,208,255,.4); }
.jpPick .jpFace.finalist.picked{ border-color:#9ff6a8; box-shadow:0 0 0 1px rgba(159,246,168,.35), 0 0 18px -8px rgba(110,240,160,.6); }

.jpMeta{
  display:flex; justify-content:space-between; align-items:center; color:#b9cbde;
  font-size:.6rem; letter-spacing:.35px;
}

/* Cast table “Evict Wk” clamps and centers (prevents cut-off) */
#castTbl{ table-layout:fixed; width:100%; border-collapse:separate; border-spacing:0 6px; }
#castTbl col.col-evictweek{ width:60px; }
#castTbl td:nth-child(3){ max-width:60px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; text-align:center; }

/* Animation for card entrance (kept minimal) */
@keyframes cardFloatIn{
  0%{ opacity:0; transform:translateY(24px) scale(.92) rotateX(10deg); }
  55%{ opacity:1; transform:translateY(-4px) scale(1.01) rotateX(0); }
  100%{ opacity:1; transform:translateY(0) scale(1); }
}

/* === Faux TV background image inside the safe screen ====================== */
:root{
  --tv-safe-top: 60px;
  --tv-safe-bottom: 80px;
  --tv-safe-x: 20px;
}

/* TV container with adaptive height */
.tv{
  position:relative;
  height: clamp(300px, 44vh, 560px);
  /* Default background with tvscreen.jpg and overlay for blending */
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    url('assets/videos/tvscreen.jpg') center/cover;
  background-color:#0e1730; /* Fallback */
  border:2px solid #213349; border-radius:18px; overflow:hidden;
  display:flex; flex-direction:column; justify-content:flex-start; padding:0;
  font-size:.72rem; box-shadow:0 16px 36px -22px rgba(0,0,0,.75);
}
/* Custom TV background support (when user sets custom image) */
.tv.hasTvBg{
  background:
    linear-gradient(to bottom, rgba(14,23,48,0.7), rgba(14,23,48,0.8)),
    var(--tv-bg) center/cover;
  background-color:#0e1730;
}
.tv.tvTall{ height: clamp(360px, 56vh, 640px); }

/* Background image layer constrained to the screen safe area */
.tv::before{
  content:'';
  position:absolute;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  background-image: var(--tv-bg, none);
  background-size: cover;
  background-position: center;
  border-radius: 12px;
  opacity:.34;                    /* base opacity */
  filter: saturate(1.05) contrast(1.02) brightness(.98);
  pointer-events:none;
  z-index: 1;                     /* behind overlay (z 12) and ticker (z 13) */
}
.tv.hasTvBg::before{ opacity:.5; } /* a touch brighter when an image is set */

/* Header, overlay, ticker — safe areas */
.tvHead{
  display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px;
  padding:10px 14px 8px; border-bottom:1px solid rgba(120,210,255,.07);
  background:linear-gradient(180deg, rgba(13,24,38,.45), rgba(7,14,24,.2));
  z-index: 14;
}
.tvTitle{ font-weight:600; letter-spacing:.6px; font-size:.75rem; color:#c7d7eb; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.tvTimer{ font-size:.95rem; font-weight:600; color:#e2edf8; white-space:nowrap; }

#tvOverlay{
  position:absolute; z-index:12;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  display:flex; align-items:center; justify-content:center; flex-direction:column; gap:8px;
  pointer-events:auto;
}
#confetti{
  position:absolute; z-index:11;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  pointer-events:none; mix-blend-mode:screen; opacity:.95;
}
.tvNow{
  position:absolute; z-index:13;
  left:var(--tv-safe-x); right:var(--tv-safe-x); bottom:10px;
  min-height:28px; padding:6px 10px; border-radius:8px; font-size:.82rem;
  background:linear-gradient(180deg, rgba(9,24,40,.85), rgba(6,14,24,.85)),
             linear-gradient(90deg, rgba(111,211,255,.18), rgba(103,255,168,.12));
  border:1px solid rgba(120,210,255,.22); box-shadow:0 4px 18px -12px rgba(0,0,0,.8);
  overflow:hidden; text-overflow:ellipsis; white-space:nowrap;
  pointer-events:none;
}

/* === Reveal Cards — center, no clipping, scroll on hover only ============ */
.revealCard{
  background:linear-gradient(135deg, rgba(28,43,62,.92), rgba(12,22,36,.88));
  border:1px solid rgba(110,160,220,.18);
  position:relative;
  text-align:center; font-size:.78rem; line-height:1.45;
  padding:18px 20px 20px; border-radius:20px;
  box-shadow:0 8px 24px -12px rgba(0,0,0,.65), 0 0 0 1px rgba(120,180,255,.08), 0 0 22px -6px rgba(90,150,255,.35) inset;
  animation:cardFloatIn .65s cubic-bezier(.25,.9,.25,1) forwards;
  box-sizing:border-box;
  width:min(780px, 100%);
  max-width:min(780px, 92vw);
  max-height: calc(100% - 14px);
  margin:0 auto;                 /* keep centered horizontally */
  overflow:hidden;               /* no scrollbar unless hover */
}
.revealCard:hover{ overflow:auto; }
.revealCard::-webkit-scrollbar{ width:8px; }
.revealCard::-webkit-scrollbar-thumb{ background:#2b4460; border-radius:8px; }
.revealCard h3{
  font-size:1.05rem; letter-spacing:.8px; margin:0 0 .55em; font-weight:600;
  background:linear-gradient(90deg,#ddecff,#8fc3ff); -webkit-background-clip:text; color:transparent;
  text-shadow:0 0 18px rgba(140,200,255,.35);
}

/* === Face-row avatars under text (kept) =================================== */
.rc-face-row{ display:flex; align-items:center; justify-content:center; gap:14px; margin-top:12px; }
.rc-face{ width:62px; height:62px; border-radius:14px; object-fit:cover; background:#101c28; border:2px solid #356089; box-shadow:0 6px 18px -10px rgba(0,0,0,.65); }
.rc-face.small{ width:54px; height:54px; border-radius:12px; }
.rc-face.xs{ width:48px; height:48px; border-radius:10px; }
.rc-arrow{ width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg,#cfe9ff,#7fd0ff); color:#0d1b2a; font-weight:800; box-shadow:0 2px 10px -4px rgba(0,0,0,.5); user-select:none; }
.rc-overflow-badge{ width:40px; height:40px; border-radius:50%; display:flex; align-items:center; justify-content:center; background:linear-gradient(135deg,#2a4766,#1f3a58); color:#e3f2ff; font-weight:700; font-size:.8rem; border:2px solid #4a6d8f; box-shadow:0 2px 8px -2px rgba(0,0,0,.6); }

/* === Settings: force timers into columns; ensure Players total visible ==== */
.settingsGrid{ display:grid; gap:14px 16px; grid-template-columns: repeat(auto-fill, minmax(180px,1fr)); }
#castTbl col.col-evictweek{ width:60px; }
#castTbl td:nth-child(3){ max-width:60px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; text-align:center; }

/* Animation reuse */
@keyframes cardFloatIn{
  0%{ opacity:0; transform:translateY(24px) scale(.92) rotateX(10deg); }
  55%{ opacity:1; transform:translateY(-4px) scale(1.01) rotateX(0); }
  100%{ opacity:1; transform:translateY(0) scale(1); }
}

.return-flash { animation: returnFlash 1.8s ease-in-out 2; }
@keyframes returnFlash {
  0% { box-shadow:0 0 0 0 rgba(140,210,255,0); }
  30% { box-shadow:0 0 14px 0 rgba(140,210,255,.9),0 0 40px -10px rgba(140,210,255,.85); transform:scale(1.04); }
  70% { box-shadow:0 0 10px 0 rgba(140,210,255,.4); }
  100% { box-shadow:0 0 0 0 rgba(140,210,255,0); transform:scale(1); }
}

/* Full screen flash overlay for dramatic interruptions */
.flash-overlay {
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,0.9);
  z-index: 9999;
  animation: flashFade .7s cubic-bezier(.55,.02,.88,.61);
  pointer-events: none;
}
@keyframes flashFade {
  0% { opacity: 1; }
  70% { opacity: 1; }
  100% { opacity: 0; }
}

/* Cast table: clamp and center the "Evict Wk" column */
#castTbl col.col-evictweek { width: 68px; }
#castTbl td:nth-child(3) {
  max-width: 68px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  text-align: center;
}

/* ...existing CSS... */

/* === Cast table visibility fix =========================================== */
/* Allow horizontal scroll for the cast list inside the card */
.card .list{ overflow-x:auto; }

/* Prevent column collapse; keep all columns visible even on narrow screens */
#castTbl{ min-width:760px; }

/* Ensure 'Evict Wk' column remains visible and centered consistently */
#castTbl col.col-evictweek{ width:72px !important; }
#castTbl td:nth-child(3){
  max-width:72px;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  text-align:center;
}

/* Cast roster — make Evict Wk visible */
.roster-row{
  /* before: grid-template-columns:210px 1fr 42px; */
  grid-template-columns: 1fr auto 56px;  /* player flexes, state auto, evict fixed */
}

/* Keep the evict column readable and centered */
.roster-row .cell.evict{ text-align:center; }

/* Let the header label wrap (Evict Wk -> 2 lines if needed) */
.roster-row.header .cell.evict{
  white-space: normal;
  line-height: 1.05;
  font-size: .58rem;
  text-align: center;
}

/* Prevent the player name from forcing the grid too wide */
.roster-row .cell.player .meta .name{
  display:block;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  max-width: 100%;
}
#tvBgVideo{
  position:absolute;
  z-index:1;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:12px;
  pointer-events:none;
  display:none;
  opacity:.5; /* similar to image overlay */
}
/* Show video only when enabled */
.tv.hasTvVideo #tvBgVideo{ display:block; }
/* Hide image overlay when video is present */
.tv.hasTvVideo::before{ display:none; }

.juryGraphBars{
  display:grid; gap:12px;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  margin-top:8px;
}
.jgCol{ display:flex; flex-direction:column; gap:6px; }
.jgName{ font-weight:700; letter-spacing:.4px; color:#d6e6f7; font-size:.8rem; }
.jgBarWrap{ height:18px; background:#12253a; border:1px solid #28405a; border-radius:10px; overflow:hidden;
  box-shadow:inset 0 6px 20px -12px rgba(0,0,0,.8);
}
.jgBar{ height:100%; width:0%; background:linear-gradient(90deg,#64b7ff,#9ad4ff);
  box-shadow:0 0 10px -3px #6ec2ff; transition:width .45s cubic-bezier(.25,.9,.25,1);
}
.jgBar.alt{ background:linear-gradient(90deg,#7ef1a3,#b9ffd0); box-shadow:0 0 10px -3px #92ffbc; }
.jgBar.lead{ filter:saturate(1.2) brightness(1.05); }
.jgCount{ font-size:.72rem; color:#b7c9dc; }

/* Subtle pulse of the leading bar */
@keyframes jgPulse{
  0%,100%{ box-shadow:0 0 10px -3px rgba(120,200,255,.55); }
  50%{ box-shadow:0 0 14px -2px rgba(120,200,255,.95); }
}
.jgBar.lead{ animation:jgPulse 1.8s ease-in-out infinite; }
.jgBar.alt.lead{ animation:jgPulse 1.8s ease-in-out infinite; }

/* === Finale End Credits =================================================== */
.creditsRoot{
  position:fixed; inset:0; z-index:350;
  background:rgba(3,10,18,.86);
  backdrop-filter:blur(6px) saturate(1.05);
  -webkit-backdrop-filter:blur(6px) saturate(1.05);
  animation:fadeIn .35s ease;
}
.creditsRoot.hide{ animation:fadeOut .3s ease forwards; }
@keyframes fadeOut{ to{ opacity:0; } }

.creditsScreen{ position:absolute; inset:24px; display:flex; }
.creditsSplit{
  display:grid; gap:16px;
  grid-template-columns:minmax(280px, 42%) 1fr;
  width:100%; height:100%;
}
@media (max-width:900px){
  .creditsSplit{ grid-template-columns:1fr; grid-auto-rows:auto 1fr; }
}

.creditsLeft{
  background:linear-gradient(135deg,#142334,#0f1a29 65%);
  border:1px solid #2a4561; border-radius:16px; padding:16px; position:relative;
  box-shadow:0 14px 38px -18px rgba(0,0,0,.8), 0 0 0 1px rgba(130,180,230,.12);
  display:flex; align-items:center; justify-content:center;
}
.winnerCard{
  display:flex; flex-direction:column; gap:10px; align-items:center; text-align:center;
}
.winnerFace{
  width:120px; height:120px; border-radius:24px; object-fit:cover;
  border:2px solid #3d628a; background:#0e1726; box-shadow:0 8px 22px -12px rgba(0,0,0,.8);
}
.winnerBanner{ font-size:1.1rem; letter-spacing:1px; font-weight:800; color:#ffd166; text-shadow:0 0 18px rgba(255,210,100,.55); }
.winnerName{ font-size:1.8rem; font-weight:800; letter-spacing:1.1px; color:#e9f3ff; text-shadow:0 0 16px rgba(140,200,255,.6); }

.creditsRight{
  position:relative; overflow:hidden;
  background:radial-gradient(120% 80% at 40% 40%, #18293b, #0e1826 65%);
  border:1px solid #2a4561; border-radius:16px; padding:16px;
  box-shadow:0 14px 38px -18px rgba(0,0,0,.8), 0 0 0 1px rgba(130,180,230,.12);
  display:flex; flex-direction:column; gap:10px;
}

/* TV effect layers */
.scanlines{
  pointer-events:none; position:absolute; inset:0; opacity:.14; mix-blend-mode:overlay;
  background:repeating-linear-gradient(to bottom, rgba(255,255,255,.03) 0 2px, rgba(0,0,0,.05) 2px 4px);
}
.tvNoise{
  position:absolute; inset:0; pointer-events:none; opacity:.06; mix-blend-mode:screen;
  background-image: radial-gradient(rgba(255,255,255,.04) 1px, transparent 1px);
  background-size: 3px 3px;
  animation:noiseFlicker 2.2s steps(2) infinite;
}
@keyframes noiseFlicker{
  50%{ opacity:.09; transform:translate3d(.2px,-.2px,0); }
}

.creditsMask{
  position:relative; flex:1 1 auto; overflow:hidden; border-radius:10px;
  border:1px solid rgba(130,180,230,.12);
  background:linear-gradient(180deg, rgba(12,22,36,.66), rgba(10,18,30,.66));
  box-shadow:inset 0 10px 28px -18px rgba(0,0,0,.85);
}
.creditsMask::before, .creditsMask::after{
  content:''; position:absolute; left:0; right:0; height:40px; z-index:2; pointer-events:none;
}
.creditsMask::before{
  top:0; background:linear-gradient(180deg, rgba(10,18,30,1), rgba(10,18,30,0));
}
.creditsMask::after{
  bottom:0; background:linear-gradient(0deg, rgba(10,18,30,1), rgba(10,18,30,0));
}

.creditsRoll{
  position:absolute; left:0; right:0; bottom:-10%;
  display:flex; flex-direction:column; gap:10px; padding:20px 16px 30px;
  font-size:.92rem; color:#dbe9ff; text-align:center;
  transform:translateY(100%); will-change:transform;
}
.creditsRoll.run{ animation:creditsRoll var(--roll-duration, 45s) linear forwards; }
@keyframes creditsRoll{
  from{ transform:translateY(100%); }
  to{ transform:translateY(-105%); }
}
.cr{ text-shadow:0 0 14px rgba(120,180,255,.3); }
.cr-h{ font-size:1.1rem; font-weight:800; letter-spacing:1px; color:#bfe0ff; margin:10px 0 2px; text-transform:uppercase; }
.cr-b{ font-size:1rem; font-weight:800; letter-spacing:.6px; color:#f2f7ff; }
.cr-t{ font-size:.86rem; font-weight:700; letter-spacing:.6px; color:#cfe2ff; text-transform:uppercase; margin-top:10px; }
.cr-p{ font-size:.86rem; font-weight:600; letter-spacing:.2px; color:#d6e6fb; }

.creditsBtns{
  display:flex; gap:8px; justify-content:flex-end; margin-top:10px;
}
#creditsMusicBtn{ background:#256246; }
#creditsMusicBtn:hover{ background:#2b6f50; }

/* Utility keyframes used above (already in your sheet but safe to include) */
@keyframes fadeIn{ from{ opacity:0; transform:translateY(12px);} to{ opacity:1; transform:translateY(0);} }

/* === Jury overlay + Credits — visuals ==================================== */
/* Jury graph in TV overlay */
.juryGraphOverlay{
  width:100%; max-width:780px; margin:0 auto;
  background:#172a3d; border:1px solid #2a4561; border-radius:14px;
  box-shadow:0 10px 26px -16px rgba(0,0,0,.75);
  padding:12px 14px 14px;
}
.jgTitle{ font-weight:700; letter-spacing:.5px; font-size:.95rem; }
.jgSub{ color:#a9bfd5; margin-top:2px; }

/* Bars reused from your previous styles (kept here to ensure present) */
.juryGraphBars{ display:grid; gap:12px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); margin-top:8px; }
.jgCol{ display:flex; flex-direction:column; gap:6px; }
.jgName{ font-weight:700; letter-spacing:.4px; color:#d6e6f7; font-size:.8rem; }
.jgBarWrap{ height:18px; background:#12253a; border:1px solid #28405a; border-radius:10px; overflow:hidden;
  box-shadow:inset 0 6px 20px -12px rgba(0,0,0,.8); }
.jgBar{ height:100%; width:0%; background:linear-gradient(90deg,#64b7ff,#9ad4ff);
  box-shadow:0 0 10px -3px #6ec2ff; transition:width .45s cubic-bezier(.25,.9,.25,1); }
.jgBar.alt{ background:linear-gradient(90deg,#7ef1a3,#b9ffd0); box-shadow:0 0 10px -3px #92ffbc; }
.jgBar.lead{ filter:saturate(1.2) brightness(1.06); animation:jgPulse 1.8s ease-in-out infinite; }
@keyframes jgPulse{ 0%,100%{ box-shadow:0 0 10px -3px rgba(120,200,255,.55); } 50%{ box-shadow:0 0 14px -2px rgba(120,200,255,.95); } }

/* Human jury vote card in overlay */
.humanJuryVoteBox{ margin-top:10px; display:flex; justify-content:center; }
.hjvCard{
  background:#162b40; border:1px solid #274765; border-radius:12px; padding:10px 12px;
  box-shadow:0 8px 20px -14px rgba(0,0,0,.7); text-align:center;
}
.hjvTitle{ font-weight:700; }

/* End Credits overlay (z-index very high to beat any other overlays) */
.creditsRoot{
  position:fixed; inset:0; z-index:99990;
  background:rgba(3,10,18,.86);
  backdrop-filter:blur(6px) saturate(1.05);
  -webkit-backdrop-filter:blur(6px) saturate(1.05);
  animation:fadeIn .35s ease;
}
.creditsRoot.hide{ animation:fadeOut .3s ease forwards; }
@keyframes fadeOut{ to{ opacity:0; } }

.creditsScreen{ position:absolute; inset:24px; display:flex; }
.creditsSplit{
  display:grid; gap:16px;
  grid-template-columns:minmax(280px, 42%) 1fr;
  width:100%; height:100%;
}
@media (max-width:900px){
  .creditsSplit{ grid-template-columns:1fr; grid-auto-rows:auto 1fr; }
}
.creditsLeft{
  background:linear-gradient(135deg,#142334,#0f1a29 65%);
  border:1px solid #2a4561; border-radius:16px; padding:16px; position:relative;
  box-shadow:0 14px 38px -18px rgba(0,0,0,.8), 0 0 0 1px rgba(130,180,230,.12);
  display:flex; align-items:center; justify-content:center;
}
.winnerCard{ display:flex; flex-direction:column; gap:10px; align-items:center; text-align:center; }
.winnerBanner{ font-size:1.1rem; letter-spacing:1px; font-weight:800; color:#ffd166; text-shadow:0 0 18px rgba(255,210,100,.55); }
.winnerName{ font-size:1.8rem; font-weight:800; letter-spacing:1.1px; color:#e9f3ff; text-shadow:0 0 16px rgba(140,200,255,.6); }

.creditsRight{
  position:relative; overflow:hidden;
  background:radial-gradient(120% 80% at 40% 40%, #18293b, #0e1826 65%);
  border:1px solid #2a4561; border-radius:16px; padding:16px;
  box-shadow:0 14px 38px -18px rgba(0,0,0,.8), 0 0 0 1px rgba(130,180,230,.12);
  display:flex; flex-direction:column; gap:10px;
}
.scanlines{
  pointer-events:none; position:absolute; inset:0; opacity:.14; mix-blend-mode:overlay;
  background:repeating-linear-gradient(to bottom, rgba(255,255,255,.03) 0 2px, rgba(0,0,0,.05) 2px 4px);
}
.tvNoise{
  position:absolute; inset:0; pointer-events:none; opacity:.06; mix-blend-mode:screen;
  background-image: radial-gradient(rgba(255,255,255,.04) 1px, transparent 1px);
  background-size: 3px 3px;
  animation:noiseFlicker 2.2s steps(2) infinite;
}
@keyframes noiseFlicker{ 50%{ opacity:.09; transform:translate3d(.2px,-.2px,0); } }

.creditsMask{
  position:relative; flex:1 1 auto; overflow:hidden; border-radius:10px;
  border:1px solid rgba(130,180,230,.12);
  background:linear-gradient(180deg, rgba(12,22,36,.66), rgba(10,18,30,.66));
  box-shadow:inset 0 10px 28px -18px rgba(0,0,0,.85);
}
.creditsMask::before, .creditsMask::after{
  content:''; position:absolute; left:0; right:0; height:40px; z-index:2; pointer-events:none;
}
.creditsMask::before{ top:0; background:linear-gradient(180deg, rgba(10,18,30,1), rgba(10,18,30,0)); }
.creditsMask::after{ bottom:0; background:linear-gradient(0deg, rgba(10,18,30,1), rgba(10,18,30,0)); }

.creditsRoll{
  position:absolute; left:0; right:0; bottom:-10%;
  display:flex; flex-direction:column; gap:10px; padding:20px 16px 30px;
  font-size:.92rem; color:#dbe9ff; text-align:center;
  transform:translateY(100%); will-change:transform;
}
.creditsRoll.run{ animation:creditsRoll var(--roll-duration, 45s) linear forwards; }
@keyframes creditsRoll{ from{ transform:translateY(100%);} to{ transform:translateY(-105%);} }
.cr{ text-shadow:0 0 14px rgba(120,180,255,.3); }
.cr-h{ font-size:1.1rem; font-weight:800; letter-spacing:1px; color:#bfe0ff; margin:10px 0 2px; text-transform:uppercase; }
.cr-b{ font-size:1rem; font-weight:800; letter-spacing:.6px; color:#f2f7ff; }
.cr-t{ font-size:.86rem; font-weight:700; letter-spacing:.6px; color:#cfe2ff; text-transform:uppercase; margin-top:10px; }
.cr-p{ font-size:.86rem; font-weight:600; letter-spacing:.2px; color:#d6e6fb; }

.creditsBtns{ display:flex; gap:8px; justify-content:flex-end; margin-top:10px; }

/* Basic fades (safe to reuse) */
@keyframes fadeIn{ from{ opacity:0; transform:translateY(12px);} to{ opacity:1; transform:translateY(0);} }

/* === Jury Viz host and ballot tiles ====================================== */
.juryVizHost{ display:flex; flex-direction:column; gap:10px; margin:8px 0 10px; }
.juryBallotTiles{ display:flex; flex-direction:column; gap:8px; }

.ballotTile{
  background:#162b40; border:1px solid #274765; border-radius:12px; padding:10px 12px;
  box-shadow:0 8px 20px -14px rgba(0,0,0,.7);
  opacity:0; transform:translateY(8px) scale(.98); transition:opacity .22s ease, transform .22s ease;
}
.ballotTile.show{ opacity:1; transform:translateY(0) scale(1); }
.ballotTile.hide{ opacity:0; transform:translateY(-6px) scale(.98); }
.bt-head{ font-weight:800; letter-spacing:.5px; margin-bottom:6px; }
.bt-row{ display:flex; align-items:center; justify-content:center; gap:12px; }
.bt-side{ display:flex; flex-direction:column; align-items:center; gap:6px; }
.bt-face{
  width:54px; height:54px; border-radius:12px; object-fit:cover;
  background:#0f1b2a; border:2px solid #315677; box-shadow:0 6px 14px -10px rgba(0,0,0,.65);
}
.bt-cap{ font-size:.65rem; color:#b7cbe2; font-weight:700; letter-spacing:.3px; }
.bt-arrow{
  width:28px; height:28px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,#cfe9ff,#7fd0ff); color:#0d1b2a; font-weight:800;
}
.bt-line{ margin-top:6px; }

/* Bars already defined earlier; ensure pulse animation exists */
@keyframes jgPulse{ 0%,100%{ box-shadow:0 0 10px -3px rgba(120,200,255,.55);} 50%{ box-shadow:0 0 14px -2px rgba(120,200,255,.95);} }

/* === End Credits: stage slides (in/out TV effect) ========================= */
.creditsStage{
  position:relative; flex:1 1 auto; overflow:hidden; border-radius:10px;
  border:1px solid rgba(130,180,230,.12);
  background:linear-gradient(180deg, rgba(12,22,36,.66), rgba(10,18,30,.66));
  box-shadow:inset 0 10px 28px -18px rgba(0,0,0,.85);
  display:flex; align-items:center; justify-content:center;
}
.creditSlide{
  position:absolute; inset:0; display:flex; flex-direction:column; gap:10px;
  align-items:center; justify-content:center; padding:22px 16px; text-align:center;
  opacity:0; transform:scale(.98); filter:contrast(.9) saturate(.95);
  transition:opacity .22s ease, transform .22s ease, filter .22s ease;
}
.creditSlide.show{
  opacity:1; transform:scale(1); filter:contrast(1) saturate(1.02);
  animation:scanFlicker .55s steps(2) 1;
}
.creditSlide.hide{ opacity:0; transform:scale(1.02); filter:contrast(1.1) saturate(1.05); }
@keyframes scanFlicker{
  30%{ opacity:.85; } 60%{ opacity:.95; } 100%{ opacity:1; }
}
.cr{ text-shadow:0 0 14px rgba(120,180,255,.3); }
.cr-h{ font-size:1.15rem; font-weight:800; letter-spacing:1px; color:#bfe0ff; margin:4px 0 6px; text-transform:uppercase; }
.cr-b{ font-size:1.02rem; font-weight:800; letter-spacing:.6px; color:#f2f7ff; }
.cr-t{ font-size:.9rem; font-weight:700; letter-spacing:.6px; color:#cfe2ff; text-transform:uppercase; }
.cr-p{ font-size:.9rem; font-weight:600; letter-spacing:.2px; color:#d6e6fb; }

/* === TV-docked jury visuals ============================================== */
/* Dock area inside the TV safe region (top). It does not block clicks by default. */
.juryVizDock{
  position:absolute;
  top: calc(var(--tv-safe-top) + 6px);
  left: var(--tv-safe-x);
  right: var(--tv-safe-x);
  z-index: 12;         /* under ticker (13), same layer as overlay */
  pointer-events: none;/* let cards receive clicks */
  display:flex; flex-direction:column; gap:8px; align-items:center;
}

/* Graph container reused (kept compact for TV) */
.juryGraphOverlay{
  width:min(680px, 92%);
  background:#172a3d; border:1px solid #2a4561; border-radius:12px;
  box-shadow:0 10px 26px -16px rgba(0,0,0,.75);
  padding:10px 12px 12px;
}
.jgTitle{ font-weight:800; letter-spacing:.5px; font-size:.9rem; }
.jgSub{ color:#a9bfd5; margin-top:2px; }
.juryGraphBars{ display:grid; gap:10px; grid-template-columns:1fr 1fr; margin-top:8px; }
.jgCol{ display:flex; flex-direction:column; gap:6px; }
.jgName{ font-weight:700; letter-spacing:.4px; color:#d6e6f7; font-size:.78rem; }
.jgBarWrap{ height:16px; background:#12253a; border:1px solid #28405a; border-radius:10px; overflow:hidden; box-shadow:inset 0 6px 20px -12px rgba(0,0,0,.8); }
.jgBar{ height:100%; width:0%; background:linear-gradient(90deg,#64b7ff,#9ad4ff); box-shadow:0 0 10px -3px #6ec2ff; transition:width .45s cubic-bezier(.25,.9,.25,1); }
.jgBar.alt{ background:linear-gradient(90deg,#7ef1a3,#b9ffd0); box-shadow:0 0 10px -3px #92ffbc; }
.jgBar.lead{ filter:saturate(1.2) brightness(1.06); animation:jgPulse 1.8s ease-in-out infinite; }
@keyframes jgPulse{ 0%,100%{ box-shadow:0 0 10px -3px rgba(120,200,255,.55);} 50%{ box-shadow:0 0 14px -2px rgba(120,200,255,.95);} }

/* Cinematic ballot tile; keep small so it doesn’t collide with cards */
.juryBallotTiles{ width:min(640px, 92%); display:flex; flex-direction:column; gap:8px; }
.ballotTile{
  background:#162b40; border:1px solid #274765; border-radius:10px; padding:8px 10px;
  box-shadow:0 8px 18px -14px rgba(0,0,0,.7);
  opacity:0; transform:translateY(8px) scale(.985); transition:opacity .2s ease, transform .2s ease;
}
.ballotTile.show{ opacity:1; transform:translateY(0) scale(1); }
.ballotTile.hide{ opacity:0; transform:translateY(-6px) scale(.985); }
.bt-head{ font-weight:800; letter-spacing:.45px; margin-bottom:4px; font-size:.8rem; }
.bt-row{ display:flex; align-items:center; justify-content:center; gap:10px; }
.bt-side{ display:flex; flex-direction:column; align-items:center; gap:5px; }
.bt-face{
  width:48px; height:48px; border-radius:10px; object-fit:cover;
  background:#0f1b2a; border:2px solid #315677; box-shadow:0 6px 14px -10px rgba(0,0,0,.65);
}
.bt-cap{ font-size:.6rem; color:#b7cbe2; font-weight:700; letter-spacing:.3px; }
.bt-arrow{
  width:24px; height:24px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,#cfe9ff,#7fd0ff); color:#0d1b2a; font-weight:800;
}
.bt-line{ margin-top:4px; }

/* Human vote box must accept clicks */
.humanJuryVoteBox{ pointer-events:auto; }
.hjvCard{
  background:#162b40; border:1px solid #274765; border-radius:10px; padding:8px 10px;
  box-shadow:0 8px 18px -14px rgba(0,0,0,.7); text-align:center;
}

/* === Credits — upgraded slide styling ==================================== */
/* Optional: if you add Google Fonts, set a stronger type stack here */
:root{
  --credits-head: "Oswald", "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --credits-body: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.creditsWinnerCard .winnerBanner{ font-family:var(--credits-head); }
.creditsWinnerCard .winnerName{ font-family:var(--credits-head); letter-spacing:1.1px; }

/* Stage centers one slide at a time; slides animate in/out */
.creditsStage{
  position:relative; flex:1 1 auto; overflow:hidden; border-radius:12px;
  border:1px solid rgba(130,180,230,.16);
  background:linear-gradient(180deg, rgba(12,22,36,.7), rgba(8,16,28,.7));
  box-shadow:inset 0 10px 28px -18px rgba(0,0,0,.85);
  display:flex; align-items:center; justify-content:center;
}
.creditSlide{
  position:absolute; inset:0; display:grid; place-items:center;
  padding:16px; opacity:0; transform:translateY(12px) scale(.98) skewY(.2deg);
  filter:saturate(.96) contrast(.98);
  transition:opacity .22s ease, transform .22s ease, filter .22s ease;
}
.creditSlide.show{
  opacity:1; transform:translateY(0) scale(1) skewY(0);
  filter:saturate(1.05) contrast(1.02);
  animation:tvFlicker .45s steps(2) 1;
}
.creditSlide.hide{ opacity:0; transform:translateY(-10px) scale(.985); filter:saturate(1.08) contrast(1.05); }
.creditSlideInner{
  width:min(720px, 92%); text-align:center;
  display:flex; flex-direction:column; gap:8px;
}

/* Typographic system for credits */
.cr{ text-shadow:0 0 14px rgba(120,180,255,.28); font-family:var(--credits-body); }
.cr-h{ font-family:var(--credits-head); font-size:1.15rem; font-weight:800; letter-spacing:1px; color:#cfe7ff; text-transform:uppercase; margin:4px 0 2px; }
.cr-b{ font-size:1.02rem; font-weight:800; letter-spacing:.6px; color:#f2f7ff; }
.cr-t{ font-size:.9rem; font-weight:800; letter-spacing:.6px; color:#d7e7ff; text-transform:uppercase; }
.cr-p{ font-size:.88rem; font-weight:600; letter-spacing:.2px; color:#d6e6fb; }

/* TV flicker */
@keyframes tvFlicker{
  0%{ opacity:.85; filter:brightness(.98); }
  40%{ opacity:1; }
  60%{ opacity:.96; }
  100%{ opacity:1; }
}

/* === TV-docked jury visuals (override/ensure no cut-offs) ================ */
.juryVizDock{
  position:absolute;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  z-index: 12;                /* below ticker (13) */
  pointer-events: none;       /* cards remain interactive */
  display:flex; flex-direction:column; gap:8px; align-items:center; justify-content:flex-start;
}
.juryGraphOverlay{
  width:min(680px, 92%);
  background:#172a3d; border:1px solid #2a4561; border-radius:12px;
  box-shadow:0 10px 26px -16px rgba(0,0,0,.75);
  padding:10px 12px 12px;
}
.juryBallotTiles{ width:min(640px, 92%); display:flex; flex-direction:column; gap:8px; }
.ballotTile{
  background:#162b40; border:1px solid #274765; border-radius:10px; padding:8px 10px;
  box-shadow:0 8px 18px -14px rgba(0,0,0,.7);
  opacity:0; transform:translateY(8px) scale(.985); transition:opacity .2s ease, transform .2s ease;
}
.ballotTile.show{ opacity:1; transform:translateY(0) scale(1); }
.ballotTile.hide{ opacity:0; transform:translateY(-6px) scale(.985); }
.bt-head{ font-weight:800; letter-spacing:.45px; margin-bottom:4px; font-size:.8rem; }
.bt-row{ display:flex; align-items:center; justify-content:center; gap:10px; }
.bt-side{ display:flex; flex-direction:column; align-items:center; gap:5px; }
.bt-face{
  width:48px; height:48px; border-radius:10px; object-fit:cover;
  background:#0f1b2a; border:2px solid #315677; box-shadow:0 6px 14px -10px rgba(0,0,0,.65);
}
.bt-cap{ font-size:.6rem; color:#b7cbe2; font-weight:700; letter-spacing:.3px; }
.bt-arrow{
  width:24px; height:24px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,#cfe9ff,#7fd0ff); color:#0d1b2a; font-weight:800;
}
.bt-line{ margin-top:4px; }
.humanJuryVoteBox{ pointer-events:auto; }
.hjvCard{
  background:#162b40; border:1px solid #274765; border-radius:10px; padding:8px 10px;
  box-shadow:0 8px 18px -14px rgba(0,0,0,.7); text-align:center;
}

/* America Vote tiebreak (mini poll inside TV) */
.amerVoteBox{
  width:min(640px, 92%); background:#172a3d; border:1px solid #2a4561; border-radius:12px;
  box-shadow:0 10px 26px -16px rgba(0,0,0,.75); padding:10px 12px; margin-top:4px;
}
.avTitle{ font-weight:800; letter-spacing:.5px; margin-bottom:6px; }
.avBars{ display:flex; flex-direction:column; gap:8px; }
.avRow{ display:grid; grid-template-columns: 110px 1fr 60px; gap:8px; align-items:center; }
.avName{ font-weight:700; color:#d7e8fa; font-size:.8rem; }
.avBarWrap{ height:14px; background:#12253a; border:1px solid #28405a; border-radius:10px; overflow:hidden; }
.avBar{ height:100%; width:0%; background:linear-gradient(90deg,#64b7ff,#9ad4ff); box-shadow:0 0 10px -3px #6ec2ff; transition:width .55s cubic-bezier(.25,.9,.25,1); }
.avBar.alt{ background:linear-gradient(90deg,#7ef1a3,#b9ffd0); box-shadow:0 0 10px -3px #92ffbc; }
.avPct{ text-align:right; color:#c5d7ec; font-weight:700; font-size:.78rem; }

/* === Credits — compact cinematic card (centered), slide-by-slide ========= */
:root{
  --credits-head: "Oswald", "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --credits-body: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}
.creditsRoot{ position:fixed; inset:0; z-index:99990; display:grid; place-items:center; background:transparent; }
.creditsRoot.hide{ animation:fadeOut .24s ease forwards; }
.creditsMini{ pointer-events:none; } /* block clicks only on the small card area */
.creditsMiniCard{
  pointer-events:auto;
  width:min(600px, 92vw);
  background:linear-gradient(135deg,#132235,#0e1a29);
  border:1px solid rgba(120,180,240,.28);
  border-radius:16px;
  box-shadow:0 18px 36px -18px rgba(0,0,0,.85), 0 0 0 1px rgba(120,180,240,.16);
  padding:16px 16px 14px;
  animation:fadeIn .24s ease;
}
.creditsMiniHeader{ display:flex; flex-direction:column; gap:2px; align-items:center; margin-bottom:8px; }
.winnerBadge{
  font-family:var(--credits-head); font-weight:800; letter-spacing:.9px; text-transform:uppercase;
  color:#ffd166; font-size:.8rem;
}
.winnerMiniName{
  font-family:var(--credits-head); font-weight:800; font-size:1.3rem; letter-spacing:1px; color:#eaf4ff;
  text-shadow:0 0 16px rgba(140,200,255,.6);
}

/* Stage shows one slide at a time; tighter spacing, elegant fade */
.creditsStage{
  position:relative; overflow:hidden; border-radius:12px;
  border:1px solid rgba(130,180,230,.14);
  background:linear-gradient(180deg, rgba(12,22,36,.66), rgba(8,16,28,.66));
  box-shadow:inset 0 10px 28px -18px rgba(0,0,0,.85);
  min-height: 170px;
}
.creditSlide{
  position:absolute; inset:0; display:grid; place-items:center;
  padding:14px; opacity:0; transform:translateY(12px) scale(.98);
  filter:saturate(.96) contrast(.98);
  transition:opacity .22s ease, transform .22s ease, filter .22s ease;
}
.creditSlide.show{
  opacity:1; transform:translateY(0) scale(1);
  filter:saturate(1.05) contrast(1.02);
  animation:tvFlicker .45s steps(2) 1;
}
.creditSlide.hide{ opacity:0; transform:translateY(-10px) scale(.985); filter:saturate(1.08) contrast(1.05); }
.creditSlideInner{
  width:min(560px, 90%); text-align:center; display:flex; flex-direction:column; gap:6px;
}

.cr{ text-shadow:0 0 12px rgba(120,180,255,.26); font-family:var(--credits-body); }
.cr-h{ font-family:var(--credits-head); font-size:1.05rem; font-weight:800; letter-spacing:.9px; color:#cfe7ff; text-transform:uppercase; }
.cr-b{ font-size:.98rem; font-weight:800; letter-spacing:.6px; color:#f2f7ff; }
.cr-t{ font-size:.86rem; font-weight:800; letter-spacing:.6px; color:#d7e7ff; text-transform:uppercase; }
.cr-p{ font-size:.86rem; font-weight:600; letter-spacing:.2px; color:#d6e6fb; }

.creditsMiniControls{ display:flex; gap:8px; justify-content:flex-end; margin-top:8px; }
#creditsPlayBtn{ background:#256246; }
#creditsPlayBtn:hover{ background:#2b6f50; }

@keyframes tvFlicker{
  0%{ opacity:.85; filter:brightness(.98); }
  40%{ opacity:1; }
  60%{ opacity:.96; }
  100%{ opacity:1; }
}
@keyframes fadeIn{ from{ opacity:0; transform:translateY(12px);} to{ opacity:1; transform:translateY(0);} }
@keyframes fadeOut{ to{ opacity:0; } }

/* === Results Modal Animations === */
@keyframes resultsModalFadeIn{ from{ opacity:0; } to{ opacity:1; } }
@keyframes resultsModalFadeOut{ to{ opacity:0; } }
@keyframes resultsCardSlideIn{ from{ opacity:0; transform:translateY(30px) scale(0.95); } to{ opacity:1; transform:translateY(0) scale(1); } }

/* === TV-docked jury visuals — ensure no cut-offs and no ticker overlap ==== */
.juryVizDock{
  position:absolute;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  z-index: 12;
  pointer-events: none;
  display:flex; flex-direction:column; gap:8px; align-items:center; justify-content:flex-start;
}
.juryGraphOverlay{
  width:min(680px, 94%);
  background:#172a3d; border:1px solid #2a4561; border-radius:12px;
  box-shadow:0 10px 26px -16px rgba(0,0,0,.75);
  padding:10px 12px 12px;
}
.juryBallotTiles{ width:min(640px, 94%); display:flex; flex-direction:column; gap:8px; }
.ballotTile{
  background:#162b40; border:1px solid #274765; border-radius:10px; padding:8px 10px;
  box-shadow:0 8px 18px -14px rgba(0,0,0,.7);
  opacity:0; transform:translateY(8px) scale(.985); transition:opacity .2s ease, transform .2s ease;
}
.ballotTile.show{ opacity:1; transform:translateY(0) scale(1); }
.ballotTile.hide{ opacity:0; transform:translateY(-6px) scale(.985); }
.bt-head{ font-weight:800; letter-spacing:.45px; margin-bottom:4px; font-size:.8rem; }
.bt-row{ display:flex; align-items:center; justify-content:center; gap:10px; }
.bt-side{ display:flex; flex-direction:column; align-items:center; gap:5px; }
.bt-face{
  width:48px; height:48px; border-radius:10px; object-fit:cover;
  background:#0f1b2a; border:2px solid #315677; box-shadow:0 6px 14px -10px rgba(0,0,0,.65);
}
.bt-cap{ font-size:.6rem; color:#b7cbe2; font-weight:700; letter-spacing:.3px; }
.bt-arrow{
  width:24px; height:24px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
  background:linear-gradient(180deg,#cfe9ff,#7fd0ff); color:#0d1b2a; font-weight:800;
}
.bt-line{ margin-top:4px; }
.humanJuryVoteBox{ pointer-events:auto; }
.hjvCard{
  background:#162b40; border:1px solid #274765; border-radius:10px; padding:8px 10px;
  box-shadow:0 8px 18px -14px rgba(0,0,0,.7); text-align:center;
}

/* America Vote tiebreak mini poll */
.amerVoteBox{
  width:min(640px, 94%); background:#172a3d; border:1px solid #2a4561; border-radius:12px;
  box-shadow:0 10px 26px -16px rgba(0,0,0,.75); padding:10px 12px; margin-top:4px;
}
.avTitle{ font-weight:800; letter-spacing:.5px; margin-bottom:6px; }
.avBars{ display:flex; flex-direction:column; gap:8px; }
.avRow{ display:grid; grid-template-columns: 110px 1fr 60px; gap:8px; align-items:center; }
.avName{ font-weight:700; color:#d7e8fa; font-size:.8rem; }
.avBarWrap{ height:14px; background:#12253a; border:1px solid #28405a; border-radius:10px; overflow:hidden; }
.avBar{ height:100%; width:0%; background:linear-gradient(90deg,#64b7ff,#9ad4ff); box-shadow:0 0 10px -3px #6ec2ff; transition:width .55s cubic-bezier(.25,.9,.25,1); }
.avBar.alt{ background:linear-gradient(90deg,#7ef1a3,#b9ffd0); box-shadow:0 0 10px -3px #92ffbc; }
.avPct{ text-align:right; color:#c5d7ec; font-weight:700; font-size:.78rem; }

/* === Credits — compact cinematic card with "CREDITS" header ============== */
.creditsRoot{ position:fixed; inset:0; z-index:99990; display:grid; place-items:center; background:transparent; }
.creditsRoot.hide{ animation:fadeOut .2s ease forwards; }
.creditsMiniCard{
  width:min(720px, 95vw);
  background:linear-gradient(135deg,#132235,#0e1a29);
  border:1px solid rgba(120,180,240,.28);
  border-radius:16px;
  box-shadow:0 18px 36px -18px rgba(0,0,0,.85), 0 0 0 1px rgba(120,180,240,.16);
  padding:16px 16px 14px;
  animation:fadeIn .2s ease;
}
.creditsMiniHeader{ display:flex; align-items:center; justify-content:center; margin-bottom:8px; }
.creditsHeaderTitle{
  font-family: "Oswald", "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:800; letter-spacing:.9px; color:#ffd166; text-transform:uppercase; font-size:1rem;
}

/* Stage and slide presentation */
.creditsStage{ position:relative; overflow:hidden; border-radius:12px; border:1px solid rgba(130,180,230,.14);
  background:linear-gradient(180deg, rgba(12,22,36,.66), rgba(8,16,28,.66)); min-height: 160px; }
.creditSlide{
  position:absolute; inset:0; display:grid; place-items:center; padding:14px; opacity:0; transform:translateY(10px) scale(.985);
  transition:opacity .2s ease, transform .2s ease;
}
.creditSlide.show{ opacity:1; transform:translateY(0) scale(1); }
.creditSlide.hide{ opacity:0; transform:translateY(-10px) scale(.985); }
.creditSlideInner{ width:min(640px, 92%); text-align:center; display:flex; flex-direction:column; gap:6px; }

.cr-h{
  font-family: "Oswald","Montserrat",system-ui,-apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size:1.05rem; font-weight:800; letter-spacing:.9px; color:#cfe7ff; text-transform:uppercase;
}
.cr-b{
  font-family: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size:.98rem; font-weight:800; letter-spacing:.6px; color:#f2f7ff;
}

/* Basic fades */
@keyframes fadeIn{ from{ opacity:0; transform:translateY(10px);} to{ opacity:1; transform:translateY(0);} }
@keyframes fadeOut{ to{ opacity:0; } }

/* === Jury tiles min dwell already handled by JS; keep visual styles from prior === */

/* === Credits: cinema mode (full-screen dim, centered two-row slides) ====== */
.creditsCinema{
  position:fixed; inset:0; z-index:99990;
  background:rgba(0,0,0,.92);   /* near-black dim */
  display:grid; place-items:center;
  animation:fadeIn .18s ease;
}
.creditsCinema.hide{ animation:fadeOut .18s ease forwards; }

.creditsCinemaStage{
  max-width: clamp(520px, 70vw, 980px);
  min-height: 160px;
  display:grid; place-items:center;
  text-align:center;
  padding: 12px;
}

.cslide{
  position:relative; opacity:0; transform:translateY(10px) scale(.985);
  transition:opacity .2s ease, transform .2s ease;
  width:100%;
}
.cslide.show{ opacity:1; transform:translateY(0) scale(1); }
.cslide.hide{ opacity:0; transform:translateY(-10px) scale(.985); }

.cslideInner{
  display:flex; flex-direction:column; gap:8px;
  align-items:center; justify-content:center;
}

.cTitle{
  font-family:"Oswald","Montserrat",system-ui,-apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:800; letter-spacing:1px; text-transform:uppercase;
  color:#f0f5ff; font-size: clamp(1.1rem, 2.4vw, 1.6rem);
  line-height:1.15;
  white-space:nowrap;   /* keep titles like “SPECIAL THANKS TO” on one line */
}
.cBody{
  font-family:"Montserrat",system-ui,-apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-weight:800; letter-spacing:.6px; color:#eaf2ff;
  font-size: clamp(.98rem, 2vw, 1.35rem);
  line-height:1.18; white-space:pre-wrap; /* allow intended line breaks only */
  text-shadow:0 0 12px rgba(140,200,255,.22);
}

.creditsCinemaControls{
  position:fixed; bottom:24px; left:0; right:0;
  display:flex; justify-content:center;
}
/* === Centering tweaks for jury visuals (append) =========================== */
.juryGraphOverlay,
.juryBallotTiles,
#amerVoteBox,
#humanJuryVoteBox {
  margin-left:auto;
  margin-right:auto;
}

/* === Credits FX layer (append) =========================================== */
.creditsFX{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:99991; /* above slides, below controls */
}

/* Electric arc: a thin glowing line that zaps in/out */
.fxArc{
  position:absolute;
  height:2px;
  background:linear-gradient(90deg, rgba(150,220,255,.0), rgba(150,220,255,.9), rgba(150,220,255,.0));
  box-shadow:0 0 14px rgba(150,220,255,.85), 0 0 28px rgba(100,180,255,.45);
  border-radius:3px;
  animation:arcZap .9s cubic-bezier(.25,.9,.25,1) 1;
  opacity:.85;
  filter:saturate(1.2);
}
@keyframes arcZap{
  0%{ opacity:0; transform:translate(-50%,-50%) scaleX(.6); }
  15%{ opacity:1; transform:translate(-50%,-50%) scaleX(1.08); }
  60%{ opacity:.85; }
  100%{ opacity:0; transform:translate(-50%,-50%) scaleX(1.4); }
}

/* BB Eye: two glowing ellipses that blink */
.fxEye{
  position:absolute;
  width:120px; height:44px;
  display:flex; align-items:center; justify-content:space-between;
  filter:saturate(1.1);
  animation:eyeBlink 1.3s ease-in-out 1;
}
.fxEye::before, .fxEye::after{
  content:'';
  width:48px; height:34px; border-radius:20px/14px;
  background:
    radial-gradient(circle at 50% 50%, rgba(255,255,255,.95) 0 6px, rgba(255,255,255,.0) 7px),
    radial-gradient(circle at 50% 50%, rgba(255,200,60,.9) 0 10px, rgba(255,200,60,.2) 11px, rgba(0,0,0,0) 12px);
  box-shadow:0 0 12px rgba(255,210,110,.55), 0 0 28px rgba(110,210,255,.25) inset;
}
@keyframes eyeBlink{
  0%{ transform:translate(-50%,-50%) scaleY(0.1); opacity:0; }
  18%{ transform:translate(-50%,-50%) scaleY(1); opacity:1; }
  80%{ transform:translate(-50%,-50%) scaleY(1); opacity:1; }
  100%{ transform:translate(-50%,-50%) scaleY(0.1); opacity:0; }
}

/* === Center fixes and layout compaction ================================ */
.juryVizDock{
  position:absolute;
  inset: var(--tv-safe-top) var(--tv-safe-x) var(--tv-safe-bottom) var(--tv-safe-x);
  z-index:12;
  pointer-events:none;
  display:flex;
  flex-direction:column;
  align-items:center;         /* hard-center */
  justify-content:flex-start;
  gap:10px;
  width:100%;
}
.juryGraphOverlay,
.juryBallotTiles,
#amerVoteBox,
#humanJuryVoteBox{
  margin-left:auto;
  margin-right:auto;
}

/* Hide the ticker strip completely (removes “Final 3 Decision” style bar) */
.tvNow{ display:none !important; }

/* Compact layout: drop right column, expand TV/Show */
body.layout-no-right .wrap{
  grid-template-columns: 300px minmax(620px, 1fr) !important;
}
body.layout-no-right #sideCard,
body.layout-no-right .rightColumn,
body.layout-no-right .infoMusicCard{ display:none !important; }

/* Topbar: keep buttons on one line and allow added Debug/Jury buttons */
.topbar{ flex-wrap:wrap; }
.topbar .btn{ white-space:nowrap; }

/* Credits cinema mode (centered slides; per-letter animations rely on these) */
.creditsCinema{
  position:fixed; inset:0; z-index:99990;
  background:rgba(0,0,0,.92);
  display:grid; place-items:center;
  animation:fadeIn .18s ease;
}
.creditsCinema.hide{ animation:fadeOut .18s ease forwards; }

.creditsCinemaStage{
  max-width: clamp(560px, 70vw, 1080px);
  min-height: 180px;
  display:grid; place-items:center;
  text-align:center;
  padding: 12px;
}

.cslide{
  position:relative; opacity:0; transform:translateY(10px) scale(.985);
  transition:opacity .22s ease, transform .22s ease;
  width:100%;
}
.cslide.show{ opacity:1; transform:translateY(0) scale(1); }
.cslide.hide{ opacity:0; transform:translateY(-10px) scale(.985); }

.cslideInner{
  display:flex; flex-direction:column; gap:10px;
  align-items:center; justify-content:center;
}

.cTitle{
  font-family:var(--credits-head);
  font-weight:800; letter-spacing:1px; text-transform:uppercase;
  color:#f0f5ff; font-size: clamp(1.1rem, 2.6vw, 1.7rem);
  line-height:1.15; white-space:nowrap;
}
.cBody{
  font-family:var(--credits-body);
  font-weight:800; letter-spacing:.6px; color:#eaf2ff;
  font-size: clamp(1rem, 2.2vw, 1.45rem);
  line-height:1.18; white-space:pre-wrap;
  text-shadow:0 0 12px rgba(140,200,255,.22);
}

/* Per-letter animation primitives */
.cTextRow{ display:inline-block; }
.cTextRow .ch{
  display:inline-block;
  transform-origin:50% 80%;
  filter:brightness(.92) contrast(1.02);
  opacity:0;
  animation:letterIn .6s cubic-bezier(.25,.9,.25,1) forwards;
}
.cslide.hide .cTextRow .ch{
  animation:letterOut .42s cubic-bezier(.4,.0,.6,1) forwards;
}

@keyframes letterIn{
  0%{ transform:translateY(16px) scale(.9) rotate(.6deg); opacity:0; filter:blur(2px); }
  60%{ opacity:1; filter:blur(0); }
  100%{ transform:translateY(0) scale(1) rotate(0); opacity:1; }
}
@keyframes letterOut{
  0%{ transform:translateY(0) scale(1); opacity:1; }
  100%{ transform:translateY(-14px) scale(.96) rotate(-.6deg); opacity:0; filter:blur(2px); }
}

/* Optional subtle spark for a few letters (CSS-only; no random lines layer) */
.ch.spark{
  text-shadow:
    0 0 10px rgba(120,210,255,.35),
    0 0 18px rgba(120,210,255,.25);
}

/* Small helper for the moved Debug/Jury buttons alignment */
.topbar .btn + .btn{ margin-left:6px; }

/* Keep common animations available */
@keyframes fadeIn{ from{ opacity:0; transform:translateY(12px);} to{ opacity:1; transform:translateY(0);} }
@keyframes fadeOut{ to{ opacity:0; } }


/* ========== Rules modal ========== */
.rulesDim{
  position:fixed; inset:0; z-index:420;
  display:none; align-items:center; justify-content:center;
  background: radial-gradient(120% 120% at 50% 10%, rgba(2,6,10,.78), rgba(0,0,0,.92));
  backdrop-filter: blur(2px);
  transition: opacity .15s ease;
}
.rulesDim.open{ opacity:1; }

.rulesPanel{
  width:min(720px, 94vw);
  max-height:80vh;
  display:flex; flex-direction:column; gap:10px;
  padding:14px 14px 12px;
  border-radius:16px;
  background: linear-gradient(145deg, #0d1624, #0a1320);
  border: 1px solid rgba(120,180,255,.22);
  box-shadow:
    0 18px 48px -18px rgba(0,0,0,.8),
    inset 0 0 42px -18px rgba(120,180,255,.26);
  transform: translateY(6px) scale(.98);
  opacity: .98;
  transition: transform .18s ease, opacity .18s ease;
}
.rulesPanel.in{
  transform: translateY(0) scale(1);
  opacity: 1;
}

.rulesTitle{
  text-align:center;
  font-weight:800;
  letter-spacing:.6px;
  color:#ffdc8b;
  text-shadow:0 0 14px rgba(255,220,140,.35);
  margin-top:4px;
}

.rulesBody{
  overflow-y:auto;
  padding: 4px 2px 2px;
  color: var(--text-2);
}

.rulesBody .rulesList{
  margin: 4px 2px 0;
  padding-left: 18px;
}
.rulesBody .rulesList li{
  margin: 6px 0;
  line-height: 1.45;
}

.rulesBtns{
  display:flex; align-items:center; justify-content:flex-end; gap:8px;
  padding-top:8px; margin-top:4px;
  border-top: 1px dashed rgba(180,215,255,.18);
}

@media (max-width: 520px){
  .rulesPanel{ padding:12px 12px 10px; border-radius:14px; }
  .rulesTitle{ font-size:1.02rem; }
}

/* === Player Profile Modal ================================================== */
.profileDim{
  position:fixed; inset:0; z-index:425;
  display:none; align-items:center; justify-content:center;
  background: radial-gradient(120% 120% at 50% 10%, rgba(2,6,10,.78), rgba(0,0,0,.92));
  backdrop-filter: blur(2px);
  transition: opacity .15s ease;
}
.profileDim.open{ opacity:1; }

.profilePanel{
  width:min(520px, 94vw);
  max-height:90vh;
  display:flex; flex-direction:column; gap:10px;
  padding:20px 24px 18px;
  border-radius:16px;
  background: linear-gradient(145deg, #0d1624, #0a1320);
  border: 1px solid rgba(120,180,255,.22);
  box-shadow:
    0 18px 48px -18px rgba(0,0,0,.8),
    inset 0 0 42px -18px rgba(120,180,255,.26);
  transform: translateY(6px) scale(.98);
  opacity: .98;
  transition: transform .18s ease, opacity .18s ease;
}
.profilePanel.in{
  transform: translateY(0) scale(1);
  opacity: 1;
}

.profileTitle{
  text-align:center;
  font-weight:800;
  font-size:1.3rem;
  letter-spacing:.6px;
  color:#ffdc8b;
  text-shadow:0 0 14px rgba(255,220,140,.35);
  margin-bottom:8px;
}

.profileBody{
  overflow-y:auto;
  padding: 8px 4px;
  color: var(--ink);
}

.profileBtns{
  display:flex; align-items:center; justify-content:flex-end; gap:8px;
  padding-top:12px; margin-top:8px;
  border-top: 1px dashed rgba(180,215,255,.18);
}

@media (max-width: 520px){
  .profilePanel{ padding:16px 16px 14px; border-radius:14px; }
  .profileTitle{ font-size:1.1rem; }
  .profileBody{ padding: 6px 2px; }
}

/* === Parental Consent Modal ================================================ */
.parentalConsentDim{
  position:fixed; inset:0; z-index:450;
  display:none; align-items:center; justify-content:center;
  background: radial-gradient(120% 120% at 50% 10%, rgba(2,6,10,.82), rgba(0,0,0,.94));
  backdrop-filter: blur(3px);
  transition: opacity .15s ease;
}
.parentalConsentDim.open{ opacity:1; }

.parentalConsentPanel{
  width:min(460px, 92vw);
  display:flex; flex-direction:column; gap:16px;
  padding:24px 28px 22px;
  border-radius:16px;
  background: linear-gradient(145deg, #0d1624, #0a1320);
  border: 1px solid rgba(255,180,80,.28);
  box-shadow:
    0 18px 48px -18px rgba(0,0,0,.85),
    inset 0 0 42px -18px rgba(255,180,80,.22);
  transform: translateY(6px) scale(.98);
  opacity: .98;
  transition: transform .18s ease, opacity .18s ease;
}
.parentalConsentPanel.in{
  transform: translateY(0) scale(1);
  opacity: 1;
}

.parentalConsentTitle{
  text-align:center;
  font-weight:800;
  font-size:1.2rem;
  letter-spacing:.6px;
  color:#ffb84d;
  text-shadow:0 0 14px rgba(255,184,77,.35);
  margin-bottom:4px;
}

.parentalConsentBody{
  padding: 8px 4px;
  color: #c4d9ec;
  line-height: 1.5;
  text-align: center;
}

.parentalConsentCheckbox{
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 12px 16px;
  background: rgba(20,40,60,.35);
  border: 1px solid rgba(120,180,255,.15);
  border-radius: 10px;
  margin: 8px 0;
}

.parentalConsentCheckbox input[type="checkbox"]{
  margin-top: 2px;
  min-width: 20px;
  min-height: 20px;
  cursor: pointer;
}

.parentalConsentCheckbox label{
  color: #d7e8fa;
  font-size: 0.95rem;
  line-height: 1.45;
  cursor: pointer;
  user-select: none;
}

.parentalConsentBtns{
  display:flex; align-items:center; justify-content:center; gap:10px;
  padding-top:8px; margin-top:4px;
}

@media (max-width: 520px){
  .parentalConsentPanel{ padding:20px 20px 18px; border-radius:14px; }
  .parentalConsentTitle{ font-size:1.05rem; }
  .parentalConsentBody{ font-size: 0.9rem; }
}

/* === TV Viewport-Safe Roster Rendering ====================================== */
/* Ensure roster renders properly inside .tvViewport without overflow */
.tvViewport #topRoster,
.tvViewport .top-roster{
  width: 100%;
  max-width: 100%;
  padding: 8px;
  box-sizing: border-box;
  overflow: hidden;
}

.tvViewport .top-roster-row{
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  justify-content: center;
  align-items: flex-start;
  max-width: 100%;
}

.tvViewport .top-roster-tile{
  flex: 0 0 auto;
  max-width: 96px;
  min-width: 48px;
}

/* Ensure roster items wrap and stay visible on mobile */
@media (max-width: 768px){
  .tvViewport #topRoster,
  .tvViewport .top-roster{
    padding: 6px;
  }
  
  .tvViewport .top-roster-row{
    gap: 6px;
  }
  
  .tvViewport .top-roster-tile{
    max-width: 84px;
    min-width: 44px;
  }
}

/* === Public's Favourite Player Feature (New Clean Implementation) ========== */
/* Modal host wrapper with flexbox centering */
.pfModalHost {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: clamp(12px, 4vw, 32px);
  z-index: 500;
}

/* Panel container with responsive sizing */
.pfPanel {
  max-width: 640px;
  width: 100%;
  background: linear-gradient(145deg, #0e1622, #0a131f);
  border: 2px solid rgba(110, 160, 220, .25);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, .8);
}

/* Panel title with responsive typography */
.pfTitle {
  font-size: clamp(0.95rem, 2.5vw, 1.05rem);
  font-weight: 800;
  letter-spacing: 0.6px;
  margin-bottom: 14px;
  text-align: center;
  color: #ffdc8b;
}

/* 4-slot voting panel with responsive grid */
.pfVotePanel {
  display: grid;
  gap: 14px;
  justify-items: center;
  margin-top: 10px;
}

/* Desktop: 4 columns (>=900px) */
@media (min-width: 900px) {
  .pfVotePanel {
    grid-template-columns: 1fr 1fr 1fr 1fr;
  }
  .pfPanel {
    max-width: 800px;
  }
}

/* Mid-size: 2x2 grid (640-899px) */
@media (min-width: 640px) and (max-width: 899px) {
  .pfVotePanel {
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
  }
}

/* Mobile: 2 columns (<640px) */
@media (max-width: 639px) {
  .pfVotePanel {
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
  
  .pfPanel {
    padding: 16px;
  }
}

/* Very narrow: 1 column (<400px) */
@media (max-width: 399px) {
  .pfVotePanel {
    grid-template-columns: 1fr;
    gap: 10px;
  }
}

.pfSlot {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  width: 100%;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

/* Player name with responsive typography */
.pfName {
  font-size: clamp(0.8rem, 2vw, 0.85rem);
  font-weight: 700;
  color: #b8d4f0;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

/* Percentage display with responsive typography */
.pfPct {
  font-size: clamp(1rem, 2.5vw, 1.1rem);
  font-weight: 800;
  color: #eaf4ff;
  text-align: center;
  /* Ensure contrast ratio ≥4.5:1 on dark background */
  text-shadow: 0 1px 2px rgba(0, 0, 0, .8);
  transition: color 0.2s ease, transform 0.2s ease;
}

/* Percentage highlight animation when updating */
.pfPct.pfUpdating {
  color: #6fd7ff;
  transform: scale(1.1);
}

/* Avatar styling */
.pfAvatar {
  width: 68px;
  height: 68px;
  border-radius: 12px;
  background: #1b2c3b;
  border: 2px solid #3d5a72;
  object-fit: cover;
  transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* Avatar glow effect on hover or update */
.pfAvatar:hover,
.pfSlot.pfLeading .pfAvatar {
  transform: scale(1.05);
  border-color: #6fd7ff;
  box-shadow: 0 0 20px rgba(111, 215, 255, 0.5);
}

/* Smaller avatars on mobile */
@media (max-width: 559px) {
  .pfAvatar {
    width: 56px;
    height: 56px;
  }
}

@media (prefers-reduced-motion: reduce) {
  .pfVotePanel, .pfSlot, .pfPct {
    transition: none !important;
  }
}

/* Winner Card Styles */
.pfWinnerCard {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(145deg, #0e1622, #0a131f);
  border: 3px solid #6fd7ff;
  border-radius: 20px;
  padding: 32px 24px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, .9), 0 0 40px rgba(111, 215, 255, .3);
  z-index: 600;
  min-width: 320px;
  max-width: 480px;
  animation: pfWinnerZoomIn 0.4s ease-out;
}

@keyframes pfWinnerZoomIn {
  from { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
  to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

.pfWinnerMain {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
  padding-bottom: 20px;
  border-bottom: 2px solid rgba(111, 215, 255, .3);
}

.pfWinnerAvatar {
  width: 72px;
  height: 72px;
  border-radius: 16px;
  border: 3px solid #6fd7ff;
  object-fit: cover;
  background: #1b2c3b;
  box-shadow: 0 4px 16px rgba(111, 215, 255, .4);
}

.pfWinnerName {
  font-size: 1.4rem;
  font-weight: 800;
  color: #ffdc8b;
  text-align: center;
  text-shadow: 0 2px 8px rgba(255, 220, 140, .5);
}

.pfWinnerPct {
  font-size: 2rem;
  font-weight: 900;
  color: #6fd7ff;
  text-shadow: 0 0 20px rgba(111, 215, 255, .6);
}

.pfRunnersList {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.pfRunnerItem {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px;
  background: rgba(111, 215, 255, .05);
  border-radius: 8px;
}

.pfRunnerAvatar {
  width: 40px;
  height: 40px;
  border-radius: 8px;
  border: 2px solid #3d5a72;
  object-fit: cover;
  background: #1b2c3b;
}

.pfRunnerName {
  flex: 1;
  font-size: 0.95rem;
  font-weight: 700;
  color: #b8d4f0;
}

.pfRunnerPct {
  font-size: 1rem;
  font-weight: 800;
  color: #eaf4ff;
  margin-left: auto;
}

@media (max-width: 559px) {
  .pfWinnerCard {
    min-width: 280px;
    max-width: calc(100vw - 32px);
    padding: 24px 16px;
  }
  
  .pfWinnerAvatar {
    width: 64px;
    height: 64px;
  }
  
  .pfWinnerName {
    font-size: 1.2rem;
  }
  
  .pfWinnerPct {
    font-size: 1.7rem;
  }
  
  .pfRunnerAvatar {
    width: 36px;
    height: 36px;
  }
}

/* Mobile jury reveal stage fixes - ensure no overlay blocking vote buttons */
@media (max-width: 768px) {
  #juryGraphBox {
    position: relative !important;
    max-height: calc(100dvh - 180px);
    overflow-y: auto;
    overflow-x: hidden;
    z-index: 10 !important;
    margin-bottom: 12px;
  }
  
  /* Ensure human jury vote panel is always visible and accessible */
  #humanJuryVote {
    position: relative !important;
    z-index: 11 !important;
    margin-top: 12px;
    clear: both;
  }
  
  /* Prevent any fixed/absolute overlays from covering interactive elements */
  .tvViewport {
    overflow-y: auto;
    max-height: calc(100dvh - 120px);
  }
}

/* Ensure PF winner card title is visible */
.pfWinnerTitle {
  font-size: 0.85rem;
  font-weight: 600;
  color: #a5c9e8;
  margin-top: 8px;
  text-align: center;
  letter-spacing: 0.5px;
}

/* $1M Check Card Display for Public Favorite Winner */
.pfCheckCard {
  margin-top: 20px;
  padding: 20px;
  background: linear-gradient(145deg, #2a1810, #1a1108);
  border: 3px solid #d4af37;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(212, 175, 55, 0.4), 
              inset 0 1px 0 rgba(255, 223, 128, 0.3);
  animation: checkSpinIn 0.8s ease-out, checkPulse 2s ease-in-out 0.8s infinite;
}

@keyframes checkSpinIn {
  0% {
    opacity: 0;
    transform: rotateY(-90deg) scale(0.5);
  }
  60% {
    opacity: 1;
    transform: rotateY(10deg) scale(1.05);
  }
  100% {
    opacity: 1;
    transform: rotateY(0deg) scale(1);
  }
}

@keyframes checkPulse {
  0%, 100% {
    box-shadow: 0 8px 24px rgba(212, 175, 55, 0.4), 
                inset 0 1px 0 rgba(255, 223, 128, 0.3);
  }
  50% {
    box-shadow: 0 12px 32px rgba(212, 175, 55, 0.6), 
                inset 0 1px 0 rgba(255, 223, 128, 0.5);
  }
}

.pfCheckHeader {
  font-size: 0.7rem;
  font-weight: 600;
  color: #b8976e;
  text-align: center;
  letter-spacing: 1px;
  text-transform: uppercase;
  margin-bottom: 8px;
}

.pfCheckAmount {
  font-size: 2rem;
  font-weight: 900;
  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #d4af37 100%);
  color: #ffd700;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  text-align: center;
  text-shadow: 0 2px 8px rgba(212, 175, 55, 0.5);
  filter: drop-shadow(0 0 12px rgba(255, 215, 0, 0.6));
  margin-bottom: 12px;
  letter-spacing: 1px;
}

.pfCheckPayto {
  font-size: 0.8rem;
  color: #b8d4f0;
  text-align: center;
  line-height: 1.5;
  margin-bottom: 8px;
}

.pfCheckPayto strong {
  display: block;
  font-size: 1rem;
  font-weight: 800;
  color: #ffdc8b;
  margin-top: 4px;
  text-shadow: 0 1px 4px rgba(255, 220, 140, 0.4);
}

.pfCheckMemo {
  font-size: 0.7rem;
  font-style: italic;
  color: #8fa9c3;
  text-align: center;
  margin-top: 8px;
}

@media (max-width: 559px) {
  .pfCheckCard {
    padding: 16px;
    margin-top: 16px;
  }
  
  .pfCheckAmount {
    font-size: 1.5rem;
  }
  
  .pfCheckPayto {
    font-size: 0.75rem;
  }
  
  .pfCheckPayto strong {
    font-size: 0.9rem;
  }
}

@media (prefers-reduced-motion: reduce) {
  .pfCheckCard {
    animation: none;
  }
}

/* Screen reader only class for accessibility */
.sr-only{
  position: absolute;
  left: -10000px;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* ========== COMPREHENSIVE ENHANCEMENT PR STYLES ========== */

/* 1. Status Labels (Replace Badges) */
.top-tile-name {
  font-size: .72rem;
  font-weight: 600;
  letter-spacing: .4px;
  color: var(--ink);
  padding: 4px 8px;
  border-radius: 6px;
  background: rgba(30, 50, 70, .6);
  margin-top: 4px;
  text-align: center;
  min-height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Status label pill backgrounds */
.top-tile-name.status-hoh {
  background: linear-gradient(135deg, #c49b2e, #d4b95b);
  color: #1a1a1a;
  font-weight: 700;
}

.top-tile-name.status-pov {
  background: linear-gradient(135deg, #2f8a3e, #4db85b);
  color: #ffffff;
  font-weight: 700;
}

.top-tile-name.status-nom {
  background: linear-gradient(135deg, #c23636, #e64a4a);
  color: #ffffff;
  font-weight: 700;
}

.top-tile-name.status-hoh-pov {
  background: linear-gradient(135deg, #c49b2e, #4db85b);
  color: #1a1a1a;
  font-weight: 700;
  font-size: .68rem;
  letter-spacing: .6px;
}

.top-tile-name.status-winner {
  background: linear-gradient(135deg, #ffd700, #ffed4e);
  color: #1a1a1a;
  font-weight: 800;
  font-size: .72rem;
  letter-spacing: .8px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.top-tile-name.status-runner-up {
  background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
  color: #1a1a1a;
  font-weight: 700;
  font-size: .66rem;
  letter-spacing: .4px;
}

/* 2. TV Card Rail with Fixed Min-Height */
.tv-card-rail {
  min-height: 280px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
}

/* 4. Card Actor-Target Avatar Cluster */
.card-avatar-cluster {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.card-actor-avatar,
.card-target-avatar {
  width: 48px;
  height: 48px;
  border-radius: 10px;
  object-fit: cover;
  border: 2px solid #356089;
  background: #101c28;
}

.card-arrow {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(180deg,#cfe9ff,#7fd0ff);
  color: #0d1b2a;
  font-weight: 800;
  font-size: .7rem;
}

.card-overflow-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(120,180,240,.25);
  font-size: .68rem;
  font-weight: 700;
  color: var(--ink);
}

/* 8. Jury Lane Safe Region */
.jury-lane {
  position: absolute;
  top: var(--tv-safe-top);
  left: var(--tv-safe-x);
  right: var(--tv-safe-x);
  bottom: var(--tv-safe-bottom);
  z-index: 11;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
}

.jury-speech-bubble {
  background: rgba(22,43,64,.95);
  border: 1px solid #274765;
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 8px 20px -14px rgba(0,0,0,.7);
  max-width: 640px;
  width: 94%;
  animation: bubbleSlideIn .3s ease;
}

@keyframes bubbleSlideIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* 9. Generic Overlay Strip */
.tv-overlay-strip {
  position: absolute;
  top: calc(var(--tv-safe-top) + 40px);
  left: var(--tv-safe-x);
  right: var(--tv-safe-x);
  z-index: 10;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  gap: 8px;
  align-items: center;
}

.overlay-message {
  background: rgba(12,22,36,.9);
  border: 1px solid rgba(120,180,240,.3);
  border-radius: 10px;
  padding: 8px 12px;
  font-size: .78rem;
  color: var(--ink);
  box-shadow: 0 6px 18px -10px rgba(0,0,0,.6);
  animation: messageFloat .4s ease;
}

@keyframes messageFloat {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* 10. Audio Mute Toggle Button */
#muteToggleBtn {
  background: rgba(30,50,70,.7);
  border: 1px solid rgba(120,180,240,.3);
  color: var(--ink);
  padding: 6px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-size: .85rem;
  transition: background .2s ease;
}

#muteToggleBtn:hover {
  background: rgba(40,65,90,.8);
}

#muteToggleBtn.muted {
  background: rgba(140,50,50,.7);
  border-color: rgba(220,100,100,.4);
}

/* 11. Mobile Card Responsiveness */
@media (max-width: 640px) {
  .revealCard {
    max-width: calc(100vw - 24px);
    max-height: calc(100vh - 160px);
    padding: 14px 16px 16px;
    font-size: .72rem;
    overflow-y: auto;
  }
  
  .revealCard h3 {
    font-size: .95rem;
  }
  
  .card-avatar-cluster {
    gap: 8px;
  }
  
  .card-actor-avatar,
  .card-target-avatar {
    width: 40px;
    height: 40px;
  }
}

/* 12. Dual HOH·POV Label Compact Styling (already handled in status-hoh-pov above) */

/* 13. Skeleton Shimmer for Avatar Preloading */
@keyframes skeleton-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

.skeleton-avatar {
  background: linear-gradient(90deg, #2a3f54 0%, #1a2f44 50%, #2a3f54 100%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s infinite;
}

/* Results modal skeleton states */
.results-modal-overlay .skeleton-avatar {
  background: linear-gradient(90deg, #2a3f54 0%, #1a2f44 50%, #2a3f54 100%);
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s infinite;
}

/* 16. Reduced Motion Support */
.reduced-motion *,
.reduced-motion *::before,
.reduced-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

/* Nominee pulse animation (optional, disabled in reduced motion) */
.nominee-pulse {
  animation: nomineeP pulse 2s ease-in-out infinite;
}

@keyframes nomineePulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(255,100,100,.4); }
  50% { box-shadow: 0 0 12px 2px rgba(255,100,100,.6); }
}

.reduced-motion .nominee-pulse {
  animation: none;
}

/* Hide old badge system */
.hg-badges {
  display: none !important;
}

/* Accessibility improvements */
.top-tile-avatar-wrap[aria-label] {
  cursor: pointer;
}

.results-modal-overlay[role="dialog"] {
  outline: none;
}

.results-modal-overlay:focus-visible {
  outline: 2px solid var(--accent-2);
  outline-offset: 2px;
}

/* Additional logging styles for debug console */
.log-entry[data-type="results"],
.log-entry[data-type="phase"],
.log-entry[data-type="ff"],
.log-entry[data-type="social"],
.log-entry[data-type="jury"] {
  font-family: 'Courier New', monospace;
  font-size: .68rem;
}

/* ========== XP/LEADERBOARD BADGE (removed - now uses .btn in topbar) ========== */

/* Top 5 Leaderboard Panel (TV-docked) - Staged Display */
.leaderboard-panel {
  position: absolute;
  top: var(--tv-safe-top);
  left: var(--tv-safe-x);
  right: var(--tv-safe-x);
  z-index: 11;
  background: linear-gradient(135deg, rgba(18, 29, 42, 0.95), rgba(13, 22, 35, 0.97));
  border: 1px solid rgba(131, 191, 255, 0.3);
  border-radius: 12px;
  padding: 16px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
  animation: slideInFromBottom 0.4s ease;
  max-width: 500px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.leaderboard-panel h2 {
  color: #ffdc8b;
  font-size: 1.2rem;
  margin: 0 0 12px 0;
  text-align: center;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  flex-shrink: 0;
}

.leaderboard-list-host {
  /* Fixed-height container to prevent layout jumps between stages */
  min-height: 200px;
  display: flex;
  flex-direction: column;
}

.leaderboard-list-host-fade {
  opacity: 0.3;
  transition: opacity 0.3s ease;
}

.leaderboard-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.leaderboard-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: rgba(18, 29, 42, 0.7);
  border: 1px solid rgba(131, 191, 255, 0.2);
  border-radius: 8px;
  transition: all 0.2s ease;
}

.leaderboard-item:hover {
  background: rgba(18, 29, 42, 0.9);
  border-color: rgba(131, 191, 255, 0.4);
}

/* Top 1 emphasis styles */
.leaderboard-item-top1 {
  padding: 14px 12px;
  background: linear-gradient(135deg, rgba(255, 220, 139, 0.12), rgba(255, 165, 0, 0.08));
  border: 1px solid rgba(255, 220, 139, 0.35);
  box-shadow: 0 0 16px rgba(255, 220, 139, 0.15);
}

.leaderboard-item-top1:hover {
  background: linear-gradient(135deg, rgba(255, 220, 139, 0.18), rgba(255, 165, 0, 0.12));
  border-color: rgba(255, 220, 139, 0.5);
}

.leaderboard-item-top1 .leaderboard-name {
  font-weight: 700;
  font-size: 1rem;
}

.leaderboard-rank {
  font-size: 1.1rem;
  font-weight: 700;
  color: #ffdc8b;
  min-width: 28px;
  text-align: center;
}

.leaderboard-name {
  flex: 1;
  font-size: 0.95rem;
  font-weight: 600;
  color: #e3ecf5;
}

.leaderboard-xp {
  font-size: 0.85rem;
  color: #95a9c0;
  font-weight: 500;
}

.leaderboard-level {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: linear-gradient(135deg, #ffdc8b 0%, #ffa500 100%);
  border-radius: 50%;
  font-size: 0.9rem;
  font-weight: 700;
  color: #1a1a1a;
}

.leaderboard-level-top1 {
  background: linear-gradient(135deg, #ffd700 0%, #ff8c00 50%, #ff6b00 100%);
  box-shadow: 0 0 12px rgba(255, 215, 0, 0.4);
}

@keyframes slideInFromBottom {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Mobile responsive styles for leaderboard panel */
@media (max-width: 520px) {
  .leaderboard-panel {
    padding: 12px;
    max-width: calc(100vw - 32px);
  }

  .leaderboard-panel h2 {
    font-size: 1rem;
    margin: 0 0 10px 0;
  }

  .leaderboard-item {
    padding: 8px 10px;
    gap: 10px;
  }

  .leaderboard-rank {
    font-size: 1rem;
    min-width: 24px;
  }

  .leaderboard-name {
    font-size: 0.85rem;
  }

  .leaderboard-xp {
    font-size: 0.75rem;
  }

  .leaderboard-level {
    width: 28px;
    height: 28px;
    font-size: 0.8rem;
  }
}
